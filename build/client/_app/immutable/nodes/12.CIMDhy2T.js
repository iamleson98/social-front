import{s as Po,e as ne,o as $e,t as Do,c as re,a as De,w as yn,q as Re,d as Ce,b as Io,k as se,i as Fo,f as V,n as xn,r as Oo,R as Lo,A as Ao}from"../chunks/scheduler.BdO_c8T1.js";import{S as Mo,i as zo}from"../chunks/index.DuQZmDCs.js";const Wo=()=>({meta:{title:"New Product"}}),Wl=Object.freeze(Object.defineProperty({__proto__:null,load:Wo},Symbol.toStringTag,{value:"Module"})),Bo={namespace:"MyEditor",theme:{},onError:console.error};function $o(n){return{}}const Xn={},Ro={},Ts={},Oe={},je={},Bt={},qe={},Zn={},In={},gt={},_t={},we={},Gn={},er={},Ko={},ws={},Jo={},ks={},Vo={},bs={},Ns={},$t={},Uo={},Es={},Ps={},Ds={},Ho={},jo={},qo={},Dr={},Is={},Yo={},Fs={},Os={},Qo={},tn={},tr={},Fn={},Xo={},Zo={},It={},Ft={},Go={},ei={},ti={},ue=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ni=ue&&"documentMode"in document?document.documentMode:null,oe=ue&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),be=ue&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Rt=!(!ue||!("InputEvent"in window)||ni)&&"getTargetRanges"in new window.InputEvent("input"),nr=ue&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),nn=ue&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ri=ue&&/Android/.test(navigator.userAgent),Ls=ue&&/^(?=.*Chrome).*/i.test(navigator.userAgent),si=ue&&ri&&Ls,rr=ue&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Ls,vt=1,Ee=3,Me=0,As=1,Qe=2,oi=0,ii=1,li=2,Kt=4,Jt=8,sr=128,ci=112|(3|Kt|Jt)|sr,or=1,ir=2,lr=3,cr=4,ar=5,ur=6,rn=nr||nn||rr?" ":"​",ye=`

`,ai=be?" ":rn,Ms="֑-߿יִ-﷽ﹰ-ﻼ",zs="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",ui=new RegExp("^[^"+zs+"]*["+Ms+"]"),di=new RegExp("^[^"+Ms+"]*["+zs+"]"),pe={bold:1,code:16,highlight:sr,italic:2,strikethrough:Kt,subscript:32,superscript:64,underline:Jt},fi={directionless:1,unmergeable:2},Ir={center:ir,end:ur,justify:cr,left:or,right:lr,start:ar},hi={[ir]:"center",[ur]:"end",[cr]:"justify",[or]:"left",[lr]:"right",[ar]:"start"},gi={normal:0,segmented:2,token:1},_i={[oi]:"normal",[li]:"segmented",[ii]:"token"};function pi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P=pi(function(n){const e=new URLSearchParams;e.append("code",n);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function Vt(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const mi=100;let On=!1,dr=0;function yi(n){dr=n.timeStamp}function vn(n,e,t){return e.__lexicalLineBreak===n||n[`__lexicalKey_${t._key}`]!==void 0}function xi(n,e,t){const r=fe(t._window);let s=null,o=null;r!==null&&r.anchorNode===n&&(s=r.anchorOffset,o=r.focusOffset);const i=n.nodeValue;i!==null&&_r(e,i,s,o,!1)}function vi(n,e,t){if(b(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return e.nodeType===Ee&&t.isAttached()}function Ws(n,e,t){On=!0;const r=performance.now()-dr>mi;try{ee(n,()=>{const s=I()||function(d){return d.getEditorState().read(()=>{const f=I();return f!==null?f.clone():null})}(n),o=new Map,i=n.getRootElement(),l=n._editorState,c=n._blockCursorElement;let a=!1,u="";for(let d=0;d<e.length;d++){const f=e[d],g=f.type,_=f.target;let p=ze(_,l);if(!(p===null&&_!==i||z(p))){if(g==="characterData")r&&E(p)&&vi(s,_,p)&&xi(_,p,n);else if(g==="childList"){a=!0;const x=f.addedNodes;for(let S=0;S<x.length;S++){const w=x[S],C=Js(w),T=w.parentNode;if(T!=null&&w!==c&&C===null&&(w.nodeName!=="BR"||!vn(w,T,n))){if(be){const k=w.innerText||w.nodeValue;k&&(u+=k)}T.removeChild(w)}}const m=f.removedNodes,y=m.length;if(y>0){let S=0;for(let w=0;w<y;w++){const C=m[w];(C.nodeName==="BR"&&vn(C,_,n)||c===C)&&(_.appendChild(C),S++)}y!==S&&(_===i&&(p=Us(l)),o.set(_,p))}}}}if(o.size>0)for(const[d,f]of o)if(v(f)){const g=f.getChildrenKeys();let _=d.firstChild;for(let p=0;p<g.length;p++){const x=g[p],m=n.getElementByKey(x);m!==null&&(_==null?(d.appendChild(m),_=m):_!==m&&d.replaceChild(m,_),_=_.nextSibling)}}else E(f)&&f.markDirty();const h=t.takeRecords();if(h.length>0){for(let d=0;d<h.length;d++){const f=h[d],g=f.addedNodes,_=f.target;for(let p=0;p<g.length;p++){const x=g[p],m=x.parentNode;m==null||x.nodeName!=="BR"||vn(x,_,n)||m.removeChild(x)}}t.takeRecords()}s!==null&&(a&&(s.dirty=!0,de(s)),be&&Ys(n)&&s.insertRawText(u))})}finally{On=!1}}function Bs(n){const e=n._observer;e!==null&&Ws(n,e.takeRecords(),e)}function $s(n){(function(e){dr===0&&ln(e).addEventListener("textInput",yi,!0)})(n),n._observer=new MutationObserver((e,t)=>{Ws(n,e,t)})}function Fr(n,e){const t=n.__mode,r=n.__format,s=n.__style,o=e.__mode,i=e.__format,l=e.__style;return!(t!==null&&t!==o||r!==null&&r!==i||s!==null&&s!==l)}function Or(n,e){const t=n.mergeWithSibling(e),r=W()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function Lr(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&E(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(Fr(e,r)){r=Or(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&E(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(Fr(r,t)){r=Or(r,t);break}break}t.remove()}}else r.remove()}function Rs(n){return Ar(n.anchor),Ar(n.focus),n}function Ar(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,s;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),s=!0):(r=e.getChildAtIndex(t),s=!1),E(r)){n.set(r.__key,s?r.getTextContentSize():0,"text");break}if(!v(r))break;n.set(r.__key,s?r.getChildrenSize():0,"element")}}let Ci=1;const Si=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function fr(n){const e=document.activeElement;if(e===null)return!1;const t=e.nodeName;return z(ze(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&e.__lexicalEditor==null)}function Ct(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!fr(e)&&Ks(e)===n}catch{return!1}}function Ks(n){let e=n;for(;e!=null;){const t=e.__lexicalEditor;if(t!=null)return t;e=on(e)}return null}function Je(n){return n.isToken()||n.isSegmented()}function Ti(n){return n.nodeType===Ee}function Ut(n){let e=n;for(;e!=null;){if(Ti(e))return e;e=e.firstChild}return null}function Ln(n,e,t){const r=pe[e];if(t!==null&&(n&r)==(t&r))return n;let s=n^r;return e==="subscript"?s&=~pe.superscript:e==="superscript"&&(s&=~pe.subscript),s}function wi(n,e){if(e!=null)return void(n.__key=e);Z(),po();const t=W(),r=xe(),s=""+Ci++;r._nodeMap.set(s,n),v(n)?t._dirtyElements.set(s,!0):t._dirtyLeaves.add(s),t._cloneNotNeeded.add(s),t._dirtyType=As,n.__key=s}function Le(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),s=n.getPreviousSibling(),o=n.getNextSibling();if(s===null)if(o!==null){const i=o.getWritable();r.__first=o.__key,i.__prev=null}else r.__first=null;else{const i=s.getWritable();if(o!==null){const l=o.getWritable();l.__prev=i.__key,i.__next=l.__key}else i.__next=null;t.__prev=null}if(o===null)if(s!==null){const i=s.getWritable();r.__last=s.__key,i.__next=null}else r.__last=null;else{const i=o.getWritable();if(s!==null){const l=s.getWritable();l.__next=i.__key,i.__prev=l.__key}else i.__prev=null;t.__next=null}r.__size--,t.__parent=null}}function Ht(n){po();const e=n.getLatest(),t=e.__parent,r=xe(),s=W(),o=r._nodeMap,i=s._dirtyElements;t!==null&&function(c,a,u){let h=c;for(;h!==null;){if(u.has(h))return;const d=a.get(h);if(d===void 0)break;u.set(h,!1),h=d.__parent}}(t,o,i);const l=e.__key;s._dirtyType=As,v(n)?i.set(l,!0):s._dirtyLeaves.add(l)}function U(n){Z();const e=W(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=Y(t);r!==null&&r.getWritable()}if(n!==null){const r=Y(n);r!==null&&r.getWritable()}}}function ke(){return bt()?null:W()._compositionKey}function Y(n,e){const t=(e||xe())._nodeMap.get(n);return t===void 0?null:t}function Js(n,e){const t=n[`__lexicalKey_${W()._key}`];return t!==void 0?Y(t,e):null}function ze(n,e){let t=n;for(;t!=null;){const r=Js(t,e);if(r!==null)return r;t=on(t)}return null}function Vs(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function Mr(n){return n.read(()=>q().getTextContent())}function q(){return Us(xe())}function Us(n){return n._nodeMap.get("root")}function de(n){Z();const e=xe();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function He(n){const e=W(),t=function(r,s){let o=r;for(;o!=null;){const i=o[`__lexicalKey_${s._key}`];if(i!==void 0)return i;o=on(o)}return null}(n,e);return t===null?n===e.getRootElement()?Y("root"):null:Y(t)}function zr(n,e){return e?n.getTextContentSize():0}function Hs(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function hr(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function js(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function qs(n){return n.nodeType===Ee?n.nodeValue:null}function gr(n,e,t){const r=fe(e._window);if(r===null)return;const s=r.anchorNode;let{anchorOffset:o,focusOffset:i}=r;if(s!==null){let l=qs(s);const c=ze(s);if(l!==null&&E(c)){if(l===rn&&t){const a=t.length;l=t,o=a,i=a}l!==null&&_r(c,l,o,i,n)}}}function _r(n,e,t,r,s){let o=n;if(o.isAttached()&&(s||!o.isDirty())){const i=o.isComposing();let l=e;(i||s)&&e[e.length-1]===rn&&(l=e.slice(0,-1));const c=o.getTextContent();if(s||l!==c){if(l===""){if(U(null),nr||nn||rr)o.remove();else{const _=W();setTimeout(()=>{_.update(()=>{o.isAttached()&&o.remove()})},20)}return}const a=o.getParent(),u=kt(),h=o.getTextContentSize(),d=ke(),f=o.getKey();if(o.isToken()||d!==null&&f===d&&!i||b(u)&&(a!==null&&!a.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!o.canInsertTextBefore()&&!i||u.focus.key===n.__key&&u.focus.offset===h&&!o.canInsertTextAfter()&&!i))return void o.markDirty();const g=I();if(!b(g)||t===null||r===null)return void o.setTextContent(l);if(g.setTextNodeRange(o,t,o,r),o.isSegmented()){const _=H(o.getTextContent());o.replace(_),o=_}o.setTextContent(l)}}}function ki(n,e){if(e.isSegmented())return!0;if(!n.isCollapsed())return!1;const t=n.anchor.offset,r=e.getParentOrThrow(),s=e.isToken();return t===0?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||s||function(o){const i=o.getPreviousSibling();return(E(i)||v(i)&&i.isInline())&&!i.canInsertTextAfter()}(e):t===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||s)}function Wr(n){return n==="ArrowLeft"}function Br(n){return n==="ArrowRight"}function lt(n,e){return oe?n:e}function $r(n){return n==="Enter"}function st(n){return n==="Backspace"}function ot(n){return n==="Delete"}function Rr(n,e,t){return n.toLowerCase()==="a"&&lt(e,t)}function bi(){const n=q();de(Rs(n.select(0,n.getChildrenSize())))}function at(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const s=n[e];if(typeof s=="string"){const o=Vt(s);return t[e]=o,o}return s}function pr(n,e,t,r,s){if(t.size===0)return;const o=r.__type,i=r.__key,l=e.get(o);l===void 0&&P(33,o);const c=l.klass;let a=n.get(c);a===void 0&&(a=new Map,n.set(c,a));const u=a.get(i),h=u==="destroyed"&&s==="created";(u===void 0||h)&&a.set(i,h?"updated":s)}function Kr(n,e,t){const r=n.getParent();let s=t,o=n;return r!==null&&(e&&t===0?(s=o.getIndexWithinParent(),o=r):e||t!==o.getChildrenSize()||(s=o.getIndexWithinParent()+1,o=r)),o.getChildAtIndex(e?s-1:s)}function pt(n,e){const t=n.offset;if(n.type==="element")return Kr(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const s=e?r.getPreviousSibling():r.getNextSibling();return s===null?Kr(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):s}}return null}function Ys(n){const e=ln(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function D(n,e,t){return mo(n,e,t)}function sn(n){return!j(n)&&!n.isLastChild()&&!n.isInline()}function jt(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&P(75,e),t}function on(n){const e=n.assignedSlot||n.parentElement;return e!==null&&e.nodeType===11?e.host:e}function An(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function ln(n){const e=n._window;return e===null&&P(78),e}function Ni(n){let e=n.getParentOrThrow();for(;e!==null;){if(Ze(e))return e;e=e.getParentOrThrow()}return e}function Ze(n){return j(n)||v(n)&&n.isShadowRoot()}function cn(n){const e=W(),t=n.constructor.getType(),r=e._nodes.get(t);r===void 0&&P(97);const s=r.replace;if(s!==null){const o=s(n);return o instanceof n.constructor||P(98),o}return n}function Cn(n,e){!j(n.getParent())||v(e)||z(e)||P(99)}function Sn(n){return(z(n)||v(n)&&!n.canBeEmpty())&&!n.isInline()}function mr(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function Ei(n,e,t){let r=n._blockCursorElement;if(b(t)&&t.isCollapsed()&&t.anchor.type==="element"&&e.contains(document.activeElement)){const s=t.anchor,o=s.getNode(),i=s.offset;let l=!1,c=null;if(i===o.getChildrenSize())Sn(o.getChildAtIndex(i-1))&&(l=!0);else{const a=o.getChildAtIndex(i);if(Sn(a)){const u=a.getPreviousSibling();(u===null||Sn(u))&&(l=!0,c=n.getElementByKey(a.__key))}}if(l){const a=n.getElementByKey(o.__key);return r===null&&(n._blockCursorElement=r=function(u){const h=u.theme,d=document.createElement("div");d.contentEditable="false",d.setAttribute("data-lexical-cursor","true");let f=h.blockCursor;if(f!==void 0){if(typeof f=="string"){const g=Vt(f);f=h.blockCursor=g}f!==void 0&&d.classList.add(...f)}return d}(n._config)),e.style.caretColor="transparent",void(c===null?a.appendChild(r):a.insertBefore(r,c))}}r!==null&&mr(r,n,e)}function fe(n){return ue?(n||window).getSelection():null}function yr(n){return n.nodeType===1}function Pi(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function Di(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function Ve(n){if(j(n)||z(n)&&!n.isInline())return!0;if(!v(n)||Ze(n))return!1;const e=n.getFirstChild(),t=e===null||ft(e)||E(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function Tn(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Qs(n,e,t,r,s,o){let i=n.getFirstChild();for(;i!==null;){const l=i.__key;i.__parent===e&&(v(i)&&Qs(i,l,t,r,s,o),t.has(l)||o.delete(l),s.push(l)),i=i.getNextSibling()}}let Ne,X,mt,an,Mn,zn,We,ae,Wn,yt,B="",Q="",ie=null,_e="",Xs=!1,un=!1,zt=null;function qt(n,e){const t=We.get(n);if(e!==null){const r=Rn(n);r.parentNode===e&&e.removeChild(r)}if(ae.has(n)||X._keyToDOMMap.delete(n),v(t)){const r=Qt(t,We);Bn(r,0,r.length-1,null)}t!==void 0&&pr(yt,mt,an,t,"destroyed")}function Bn(n,e,t,r){let s=e;for(;s<=t;++s){const o=n[s];o!==void 0&&qt(o,r)}}function Ie(n,e){n.setProperty("text-align",e)}const Ii="40px";function Zs(n,e){const t=Ne.theme.indent;if(typeof t=="string"){const s=n.classList.contains(t);e>0&&!s?n.classList.add(t):e<1&&s&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Ii;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Gs(n,e){const t=n.style;e===0?Ie(t,""):e===or?Ie(t,"left"):e===ir?Ie(t,"center"):e===lr?Ie(t,"right"):e===cr?Ie(t,"justify"):e===ar?Ie(t,"start"):e===ur&&Ie(t,"end")}function Yt(n,e,t){const r=ae.get(n);r===void 0&&P(60);const s=r.createDOM(Ne,X);if(function(o,i,l){const c=l._keyToDOMMap;i["__lexicalKey_"+l._key]=o,c.set(o,i)}(n,s,X),E(r)?s.setAttribute("data-lexical-text","true"):z(r)&&s.setAttribute("data-lexical-decorator","true"),v(r)){const o=r.__indent,i=r.__size;if(o!==0&&Zs(s,o),i!==0){const c=i-1;(function(a,u,h,d){const f=Q;Q="",$n(a,h,0,u,d,null),to(h,d),Q=f})(Qt(r,ae),c,r,s)}const l=r.__format;l!==0&&Gs(s,l),r.isInline()||eo(null,r,s),sn(r)&&(B+=ye,_e+=ye)}else{const o=r.getTextContent();if(z(r)){const i=r.decorate(X,Ne);i!==null&&no(n,i),s.contentEditable="false"}else E(r)&&(r.isDirectionless()||(Q+=o));B+=o,_e+=o}if(e!==null)if(t!=null)e.insertBefore(s,t);else{const o=e.__lexicalLineBreak;o!=null?e.insertBefore(s,o):e.appendChild(s)}return pr(yt,mt,an,r,"created"),s}function $n(n,e,t,r,s,o){const i=B;B="";let l=t;for(;l<=r;++l){Yt(n[l],s,o);const c=ae.get(n[l]);c!==null&&ie===null&&E(c)&&(ie=c.getFormat())}sn(e)&&(B+=ye),s.__lexicalTextContent=B,B=i+B}function Jr(n,e){const t=e.get(n);return ft(t)||z(t)&&t.isInline()}function eo(n,e,t){const r=n!==null&&(n.__size===0||Jr(n.__last,We)),s=e.__size===0||Jr(e.__last,ae);if(r){if(!s){const o=t.__lexicalLineBreak;o!=null&&t.removeChild(o),t.__lexicalLineBreak=null}}else if(s){const o=document.createElement("br");t.__lexicalLineBreak=o,t.appendChild(o)}}function to(n,e){const t=e.__lexicalDirTextContent,r=e.__lexicalDir;if(t!==Q||r!==zt){const o=Q==="",i=o?zt:(s=Q,ui.test(s)?"rtl":di.test(s)?"ltr":null);if(i!==r){const l=e.classList,c=Ne.theme;let a=r!==null?c[r]:void 0,u=i!==null?c[i]:void 0;if(a!==void 0){if(typeof a=="string"){const h=Vt(a);a=c[r]=h}l.remove(...a)}if(i===null||o&&i==="ltr")e.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const h=Vt(u);u=c[i]=h}u!==void 0&&l.add(...u)}e.dir=i}un||(n.getWritable().__dir=i)}zt=i,e.__lexicalDirTextContent=Q,e.__lexicalDir=i}var s}function Fi(n,e,t){const r=Q;var s;Q="",ie=null,function(o,i,l){const c=B,a=o.__size,u=i.__size;if(B="",a===1&&u===1){const h=o.__first,d=i.__first;if(h===d)ct(h,l);else{const g=Rn(h),_=Yt(d,null,null);l.replaceChild(_,g),qt(h,null)}const f=ae.get(d);ie===null&&E(f)&&(ie=f.getFormat())}else{const h=Qt(o,We),d=Qt(i,ae);if(a===0)u!==0&&$n(d,i,0,u-1,l,null);else if(u===0){if(a!==0){const f=l.__lexicalLineBreak==null;Bn(h,0,a-1,f?null:l),f&&(l.textContent="")}}else(function(f,g,_,p,x,m){const y=p-1,S=x-1;let w,C,T=(F=m,F.firstChild),k=0,N=0;for(var F;k<=y&&N<=S;){const M=g[k],O=_[N];if(M===O)T=wn(ct(O,m)),k++,N++;else{w===void 0&&(w=new Set(g)),C===void 0&&(C=new Set(_));const te=C.has(M),Be=w.has(O);if(te)if(Be){const nt=jt(X,O);nt===T?T=wn(ct(O,m)):(T!=null?m.insertBefore(nt,T):m.appendChild(nt),ct(O,m)),k++,N++}else Yt(O,m,T),N++;else T=wn(Rn(M)),qt(M,m),k++}const J=ae.get(O);J!==null&&ie===null&&E(J)&&(ie=J.getFormat())}const A=k>y,K=N>S;if(A&&!K){const M=_[S+1];$n(_,f,N,S,m,M===void 0?null:X.getElementByKey(M))}else K&&!A&&Bn(g,k,y,m)})(i,h,d,a,u,l)}sn(i)&&(B+=ye),l.__lexicalTextContent=B,B=c+B}(n,e,t),to(e,t),xt(s=e)&&ie!=null&&ie!==s.__textFormat&&!un&&s.setTextFormat(ie),Q=r,ie=null}function Qt(n,e){const t=[];let r=n.__first;for(;r!==null;){const s=e.get(r);s===void 0&&P(101),t.push(r),r=s.__next}return t}function ct(n,e){const t=We.get(n);let r=ae.get(n);t!==void 0&&r!==void 0||P(61);const s=Xs||zn.has(n)||Mn.has(n),o=jt(X,n);if(t===r&&!s){if(v(t)){const i=o.__lexicalTextContent;i!==void 0&&(B+=i,_e+=i);const l=o.__lexicalDirTextContent;l!==void 0&&(Q+=l)}else{const i=t.getTextContent();E(t)&&!t.isDirectionless()&&(Q+=i),_e+=i,B+=i}return o}if(t!==r&&s&&pr(yt,mt,an,r,"updated"),r.updateDOM(t,o,Ne)){const i=Yt(n,null,null);return e===null&&P(62),e.replaceChild(i,o),qt(n,null),i}if(v(t)&&v(r)){const i=r.__indent;i!==t.__indent&&Zs(o,i);const l=r.__format;l!==t.__format&&Gs(o,l),s&&(Fi(t,r,o),j(r)||r.isInline()||eo(t,r,o)),sn(r)&&(B+=ye,_e+=ye)}else{const i=r.getTextContent();if(z(r)){const l=r.decorate(X,Ne);l!==null&&no(n,l)}else E(r)&&!r.isDirectionless()&&(Q+=i);B+=i,_e+=i}if(!un&&j(r)&&r.__cachedText!==_e){const i=r.getWritable();i.__cachedText=_e,r=i}return o}function no(n,e){let t=X._pendingDecorators;const r=X._decorators;if(t===null){if(r[n]===e)return;t=Vs(X)}t[n]=e}function wn(n){let e=n.nextSibling;return e!==null&&e===X._blockCursorElement&&(e=e.nextSibling),e}function Oi(n,e,t,r,s,o){B="",_e="",Q="",Xs=r===Qe,zt=null,X=t,Ne=t._config,mt=t._nodes,an=X._listeners.mutation,Mn=s,zn=o,We=n._nodeMap,ae=e._nodeMap,un=e._readOnly,Wn=new Map(t._keyToDOMMap);const i=new Map;return yt=i,ct("root",null),X=void 0,mt=void 0,Mn=void 0,zn=void 0,We=void 0,ae=void 0,Ne=void 0,Wn=void 0,yt=void 0,i}function Rn(n){const e=Wn.get(n);return e===void 0&&P(75,n),e}const ge=Object.freeze({}),Kn=30,Jn=[["keydown",function(n,e){if(ut=n.timeStamp,ro=n.key,e.isComposing())return;const{key:t,shiftKey:r,ctrlKey:s,metaKey:o,altKey:i}=n;D(e,Ko,n)||t!=null&&(function(l,c,a,u){return Br(l)&&!c&&!u&&!a}(t,s,i,o)?D(e,ws,n):function(l,c,a,u,h){return Br(l)&&!u&&!a&&(c||h)}(t,s,r,i,o)?D(e,Jo,n):function(l,c,a,u){return Wr(l)&&!c&&!u&&!a}(t,s,i,o)?D(e,ks,n):function(l,c,a,u,h){return Wr(l)&&!u&&!a&&(c||h)}(t,s,r,i,o)?D(e,Vo,n):function(l,c,a){return function(u){return u==="ArrowUp"}(l)&&!c&&!a}(t,s,o)?D(e,bs,n):function(l,c,a){return function(u){return u==="ArrowDown"}(l)&&!c&&!a}(t,s,o)?D(e,Ns,n):function(l,c){return $r(l)&&c}(t,r)?(dt=!0,D(e,$t,n)):function(l){return l===" "}(t)?D(e,Uo,n):function(l,c){return oe&&c&&l.toLowerCase()==="o"}(t,s)?(n.preventDefault(),dt=!0,D(e,je,!0)):function(l,c){return $r(l)&&!c}(t,r)?(dt=!1,D(e,$t,n)):function(l,c,a,u){return oe?!c&&!a&&(st(l)||l.toLowerCase()==="h"&&u):!(u||c||a)&&st(l)}(t,i,o,s)?st(t)?D(e,Es,n):(n.preventDefault(),D(e,Oe,!0)):function(l){return l==="Escape"}(t)?D(e,Ps,n):function(l,c,a,u,h){return oe?!(a||u||h)&&(ot(l)||l.toLowerCase()==="d"&&c):!(c||u||h)&&ot(l)}(t,s,r,i,o)?ot(t)?D(e,Ds,n):(n.preventDefault(),D(e,Oe,!1)):function(l,c,a){return st(l)&&(oe?c:a)}(t,i,s)?(n.preventDefault(),D(e,gt,!0)):function(l,c,a){return ot(l)&&(oe?c:a)}(t,i,s)?(n.preventDefault(),D(e,gt,!1)):function(l,c){return oe&&c&&st(l)}(t,o)?(n.preventDefault(),D(e,_t,!0)):function(l,c){return oe&&c&&ot(l)}(t,o)?(n.preventDefault(),D(e,_t,!1)):function(l,c,a,u){return l.toLowerCase()==="b"&&!c&&lt(a,u)}(t,i,o,s)?(n.preventDefault(),D(e,we,"bold")):function(l,c,a,u){return l.toLowerCase()==="u"&&!c&&lt(a,u)}(t,i,o,s)?(n.preventDefault(),D(e,we,"underline")):function(l,c,a,u){return l.toLowerCase()==="i"&&!c&&lt(a,u)}(t,i,o,s)?(n.preventDefault(),D(e,we,"italic")):function(l,c,a,u){return l==="Tab"&&!c&&!a&&!u}(t,i,s,o)?D(e,Ho,n):function(l,c,a,u){return l.toLowerCase()==="z"&&!c&&lt(a,u)}(t,r,o,s)?(n.preventDefault(),D(e,Gn,void 0)):function(l,c,a,u){return oe?l.toLowerCase()==="z"&&a&&c:l.toLowerCase()==="y"&&u||l.toLowerCase()==="z"&&u&&c}(t,r,o,s)?(n.preventDefault(),D(e,er,void 0)):ce(e._editorState._selection)?function(l,c,a,u){return!c&&l.toLowerCase()==="c"&&(oe?a:u)}(t,r,o,s)?(n.preventDefault(),D(e,tn,n)):function(l,c,a,u){return!c&&l.toLowerCase()==="x"&&(oe?a:u)}(t,r,o,s)?(n.preventDefault(),D(e,tr,n)):Rr(t,o,s)&&(n.preventDefault(),D(e,Fn,n)):!be&&Rr(t,o,s)&&(n.preventDefault(),D(e,Fn,n)),function(l,c,a,u){return l||c||a||u}(s,r,i,o)&&D(e,ti,n))}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;t instanceof Node&&r!=="touch"&&ee(e,()=>{z(ze(t))||(Un=!0)})}],["compositionstart",function(n,e){ee(e,()=>{const t=I();if(b(t)&&!e.isComposing()){const r=t.anchor,s=t.anchor.getNode();U(r.key),(n.timeStamp<ut+Kn||r.type==="element"||!t.isCollapsed()||s.getFormat()!==t.format||E(s)&&s.getStyle()!==t.style)&&D(e,qe,ai)}})}],["compositionend",function(n,e){be?it=!0:ee(e,()=>{kn(e,n.data)})}],["input",function(n,e){n.stopPropagation(),ee(e,()=>{const t=I(),r=n.data,s=lo(n);if(r!=null&&b(t)&&io(t,s,r,n.timeStamp,!1)){it&&(kn(e,r),it=!1);const o=t.anchor.getNode(),i=fe(e._window);if(i===null)return;const l=t.isBackward(),c=l?t.anchor.offset:t.focus.offset,a=l?t.focus.offset:t.anchor.offset;Rt&&!t.isCollapsed()&&E(o)&&i.anchorNode!==null&&o.getTextContent().slice(0,c)+r+o.getTextContent().slice(c+a)===qs(i.anchorNode)||D(e,qe,r);const u=r.length;be&&u>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=u),nr||nn||rr||!e.isComposing()||(ut=0,U(null))}else gr(!1,e,r!==null?r:void 0),it&&(kn(e,r||void 0),it=!1);Z(),Bs(W())}),Ue=null}],["click",function(n,e){ee(e,()=>{const t=I(),r=fe(e._window),s=kt();if(r){if(b(t)){const o=t.anchor,i=o.getNode();o.type==="element"&&o.offset===0&&t.isCollapsed()&&!j(i)&&q().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&t.is(s)?(r.removeAllRanges(),t.dirty=!0):n.detail===3&&!t.isCollapsed()&&i!==t.focus.getNode()&&(v(i)?i.select(0):i.getParentOrThrow().select(0))}else if(n.pointerType==="touch"){const o=r.anchorNode;if(o!==null){const i=o.nodeType;(i===vt||i===Ee)&&de(vr(s,r,e,n))}}}D(e,Ts,n)})}],["cut",ge],["copy",ge],["dragstart",ge],["dragover",ge],["dragend",ge],["paste",ge],["focus",ge],["blur",ge],["drop",ge]];Rt&&Jn.push(["beforeinput",(n,e)=>function(t,r){const s=t.inputType,o=lo(t);s==="deleteCompositionText"||be&&Ys(r)||s!=="insertCompositionText"&&ee(r,()=>{const i=I();if(s==="deleteContentBackward"){if(i===null){const f=kt();if(!b(f))return;de(f.clone())}if(b(i)){const f=i.anchor.key===i.focus.key;if(l=t.timeStamp,ro==="MediaLast"&&l<ut+Kn&&r.isComposing()&&f){if(U(null),ut=0,setTimeout(()=>{ee(r,()=>{U(null)})},Kn),b(i)){const g=i.anchor.getNode();g.markDirty(),i.format=g.getFormat(),E(g)||P(142),i.style=g.getStyle()}}else{U(null),t.preventDefault();const g=i.anchor.getNode().getTextContent(),_=i.anchor.offset===0&&i.focus.offset===g.length;si&&f&&!_||D(r,Oe,!0)}return}}var l;if(!b(i))return;const c=t.data;Ue!==null&&gr(!1,r,Ue),i.dirty&&Ue===null||!i.isCollapsed()||j(i.anchor.getNode())||o===null||i.applyDOMRange(o),Ue=null;const a=i.anchor,u=i.focus,h=a.getNode(),d=u.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(t.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":D(r,qe,t);break;case"insertFromComposition":U(null),D(r,qe,t);break;case"insertLineBreak":U(null),D(r,je,!1);break;case"insertParagraph":U(null),dt&&!nn?(dt=!1,D(r,je,!1)):D(r,Bt,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":D(r,Zn,t);break;case"deleteByComposition":(function(f,g){return f!==g||v(f)||v(g)||!f.isToken()||!g.isToken()})(h,d)&&D(r,In,t);break;case"deleteByDrag":case"deleteByCut":D(r,In,t);break;case"deleteContent":D(r,Oe,!1);break;case"deleteWordBackward":D(r,gt,!0);break;case"deleteWordForward":D(r,gt,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":D(r,_t,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":D(r,_t,!1);break;case"formatStrikeThrough":D(r,we,"strikethrough");break;case"formatBold":D(r,we,"bold");break;case"formatItalic":D(r,we,"italic");break;case"formatUnderline":D(r,we,"underline");break;case"historyUndo":D(r,Gn,void 0);break;case"historyRedo":D(r,er,void 0)}else{if(c===`
`)t.preventDefault(),D(r,je,!1);else if(c===ye)t.preventDefault(),D(r,Bt,void 0);else if(c==null&&t.dataTransfer){const f=t.dataTransfer.getData("text/plain");t.preventDefault(),i.insertRawText(f)}else c!=null&&io(i,o,c,t.timeStamp,!0)?(t.preventDefault(),D(r,qe,c)):Ue=c;so=t.timeStamp}})}(n,e)]);let ut=0,ro=null,so=0,Ue=null;const Xt=new WeakMap;let Vn=!1,Un=!1,dt=!1,it=!1,oo=[0,"",0,"root",0];function io(n,e,t,r,s){const o=n.anchor,i=n.focus,l=o.getNode(),c=W(),a=fe(c._window),u=a!==null?a.anchorNode:null,h=o.key,d=c.getElementByKey(h),f=t.length;return h!==i.key||!E(l)||(!s&&(!Rt||so<r+50)||l.isDirty()&&f<2||Hs(t))&&o.offset!==i.offset&&!l.isComposing()||Je(l)||l.isDirty()&&f>1||(s||!Rt)&&d!==null&&!l.isComposing()&&u!==Ut(d)||a!==null&&e!==null&&(!e.collapsed||e.startContainer!==a.anchorNode||e.startOffset!==a.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||ki(n,l)}function Vr(n,e){return n!==null&&n.nodeValue!==null&&n.nodeType===Ee&&e!==0&&e!==n.nodeValue.length}function Ur(n,e,t){const{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:i}=n;Vn&&(Vn=!1,Vr(r,s)&&Vr(o,i))||ee(e,()=>{if(!t)return void de(null);if(!Ct(e,r,o))return;const l=I();if(b(l)){const c=l.anchor,a=c.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const u=ln(e).event,h=u?u.timeStamp:performance.now(),[d,f,g,_,p]=oo,x=q(),m=e.isComposing()===!1&&x.getTextContent()==="";if(h<p+200&&c.offset===g&&c.key===_)l.format=d,l.style=f;else if(c.type==="text")E(a)||P(141),l.format=a.getFormat(),l.style=a.getStyle();else if(c.type==="element"&&!m){const y=c.getNode();y instanceof et&&y.getChildrenSize()===0?l.format=y.getTextFormat():l.format=0,l.style=""}}else{const u=c.key,h=l.focus.key,d=l.getNodes(),f=d.length,g=l.isBackward(),_=g?i:s,p=g?s:i,x=g?h:u,m=g?u:h;let y=ci,S=!1;for(let w=0;w<f;w++){const C=d[w],T=C.getTextContentSize();if(E(C)&&T!==0&&!(w===0&&C.__key===x&&_===T||w===f-1&&C.__key===m&&p===0)&&(S=!0,y&=C.getFormat(),y===0))break}l.format=S?y:0}}D(e,Xn,void 0)})}function lo(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function kn(n,e){const t=n._compositionKey;if(U(null),t!==null&&e!=null){if(e===""){const r=Y(t),s=Ut(n.getElementByKey(t));return void(s!==null&&s.nodeValue!==null&&E(r)&&_r(r,s.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=I();if(b(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void D(n,$t,null)}}}gr(!0,n,e)}function co(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const Ye=new Map;function ao(n){const e=n.target,t=fe(e==null?null:e.nodeType===9?e.defaultView:e.ownerDocument.defaultView);if(t===null)return;const r=Ks(t.anchorNode);if(r===null)return;Un&&(Un=!1,ee(r,()=>{const a=kt(),u=t.anchorNode;if(u===null)return;const h=u.nodeType;h!==vt&&h!==Ee||de(vr(a,t,r,n))}));const s=hr(r),o=s[s.length-1],i=o._key,l=Ye.get(i),c=l||o;c!==r&&Ur(t,c,!1),Ur(t,r,!0),r!==o?Ye.set(i,r):l&&Ye.delete(i)}function Hr(n){n._lexicalHandled=!0}function jr(n){return n._lexicalHandled===!0}function Li(n){const e=n.ownerDocument,t=Xt.get(e);t===void 0&&P(162);const r=t-1;r>=0||P(164),Xt.set(e,r),r===0&&e.removeEventListener("selectionchange",ao);const s=n.__lexicalEditor;s!=null&&(function(i){if(i._parentEditor!==null){const l=hr(i),c=l[l.length-1]._key;Ye.get(c)===i&&Ye.delete(c)}else Ye.delete(i._key)}(s),n.__lexicalEditor=null);const o=co(n);for(let i=0;i<o.length;i++)o[i]();n.__lexicalEventHandles=[]}function Hn(n,e,t){Z();const r=n.__key,s=n.getParent();if(s===null)return;const o=function(l){const c=I();if(!b(c)||!v(l))return c;const{anchor:a,focus:u}=c,h=a.getNode(),d=u.getNode();return An(h,l)&&a.set(l.__key,0,"element"),An(d,l)&&u.set(l.__key,0,"element"),c}(n);let i=!1;if(b(o)&&e){const l=o.anchor,c=o.focus;l.key===r&&(Gt(l,n,s,n.getPreviousSibling(),n.getNextSibling()),i=!0),c.key===r&&(Gt(c,n,s,n.getPreviousSibling(),n.getNextSibling()),i=!0)}else ce(o)&&e&&n.isSelected()&&n.selectPrevious();if(b(o)&&e&&!i){const l=n.getIndexWithinParent();Le(n),Zt(o,s,l,-1)}else Le(n);t||Ze(s)||s.canBeEmpty()||!s.isEmpty()||Hn(s,e),e&&j(s)&&s.isEmpty()&&s.selectEnd()}class dn{static getType(){P(64,this.name)}static clone(e){P(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,wi(this,e)}getType(){return this.__type}isInline(){P(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Y(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||I();if(t==null)return!1;const r=t.getNodes().some(s=>s.__key===this.__key);return(E(this)||!b(t)||t.anchor.type!=="element"||t.focus.type!=="element"||t.anchor.key!==t.focus.key||t.anchor.offset!==t.focus.offset)&&r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Y(e)}getParentOrThrow(){const e=this.getParent();return e===null&&P(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(Ze(t))return v(e)||P(138),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&P(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Y(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Y(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=this.getParents(),r=e.getParents();v(this)&&t.unshift(this),v(e)&&r.unshift(e);const s=t.length,o=r.length;if(s===0||o===0||t[s-1]!==r[o-1])return null;const i=new Set(r);for(let l=0;l<s;l++){const c=t[l];if(i.has(c))return c}return null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;const t=this.getCommonAncestor(e);let r=0,s=0,o=this;for(;;){const i=o.getParentOrThrow();if(i===t){r=o.getIndexWithinParent();break}o=i}for(o=e;;){const i=o.getParentOrThrow();if(i===t){s=o.getIndexWithinParent();break}o=i}return r<s}isParentOf(e){const t=this.__key;if(t===e.__key)return!1;let r=e;for(;r!==null;){if(r.__key===t)return!0;r=r.getParent()}return!1}getNodesBetween(e){const t=this.isBefore(e),r=[],s=new Set;let o=this;for(;o!==null;){const i=o.__key;if(s.has(i)||(s.add(i),r.push(o)),o===e)break;const l=v(o)?t?o.getFirstChild():o.getLastChild():null;if(l!==null){o=l;continue}const c=t?o.getNextSibling():o.getPreviousSibling();if(c!==null){o=c;continue}const a=o.getParentOrThrow();if(s.has(a.__key)||r.push(a),a===e)break;let u=null,h=a;do{if(h===null&&P(68),u=t?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;u!==null||s.has(h.__key)||r.push(h)}while(u===null);o=u}return t||r.reverse(),r}isDirty(){const e=W()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Y(this.__key);return e===null&&P(113),e}getWritable(){Z();const e=xe(),t=W(),r=e._nodeMap,s=this.__key,o=this.getLatest(),i=o.__parent,l=t._cloneNotNeeded,c=I();if(c!==null&&c.setCachedNodes(null),l.has(s))return Ht(o),o;const a=o.constructor.clone(o);return a.__parent=i,a.__next=o.__next,a.__prev=o.__prev,v(o)&&v(a)?(xt(o)&&xt(a)&&(a.__textFormat=o.__textFormat),a.__first=o.__first,a.__last=o.__last,a.__size=o.__size,a.__indent=o.__indent,a.__format=o.__format,a.__dir=o.__dir):E(o)&&E(a)&&(a.__format=o.__format,a.__style=o.__style,a.__mode=o.__mode,a.__detail=o.__detail),l.add(s),a.__key=s,Ht(a),r.set(s,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){P(70)}updateDOM(e,t,r){P(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){P(72)}static importJSON(e){P(18,this.name)}static transform(){return null}remove(e){Hn(this,!0,e)}replace(e,t){Z();let r=I();r!==null&&(r=r.clone()),Cn(this,e);const s=this.getLatest(),o=this.__key,i=e.__key,l=e.getWritable(),c=this.getParentOrThrow().getWritable(),a=c.__size;Le(l);const u=s.getPreviousSibling(),h=s.getNextSibling(),d=s.__prev,f=s.__next,g=s.__parent;if(Hn(s,!1,!0),u===null?c.__first=i:u.getWritable().__next=i,l.__prev=d,h===null?c.__last=i:h.getWritable().__prev=i,l.__next=f,l.__parent=g,c.__size=a,t&&(v(this)&&v(l)||P(139),this.getChildren().forEach(_=>{l.append(_)})),b(r)){de(r);const _=r.anchor,p=r.focus;_.key===o&&Zr(_,l),p.key===o&&Zr(p,l)}return ke()===o&&U(i),l}insertAfter(e,t=!0){Z(),Cn(this,e);const r=this.getWritable(),s=e.getWritable(),o=s.getParent(),i=I();let l=!1,c=!1;if(o!==null){const f=e.getIndexWithinParent();if(Le(s),b(i)){const g=o.__key,_=i.anchor,p=i.focus;l=_.type==="element"&&_.key===g&&_.offset===f+1,c=p.type==="element"&&p.key===g&&p.offset===f+1}}const a=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),h=s.__key,d=r.__next;if(a===null?u.__last=h:a.getWritable().__prev=h,u.__size++,r.__next=h,s.__next=d,s.__prev=r.__key,s.__parent=r.__parent,t&&b(i)){const f=this.getIndexWithinParent();Zt(i,u,f+1);const g=u.__key;l&&i.anchor.set(g,f+2,"element"),c&&i.focus.set(g,f+2,"element")}return e}insertBefore(e,t=!0){Z(),Cn(this,e);const r=this.getWritable(),s=e.getWritable(),o=s.__key;Le(s);const i=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),c=r.__prev,a=this.getIndexWithinParent();i===null?l.__first=o:i.getWritable().__next=o,l.__size++,r.__prev=o,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const u=I();return t&&b(u)&&Zt(u,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return me()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){Z();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(v(r))return r.select();if(!E(r)){const o=r.getIndexWithinParent()+1;return s.select(o,o)}return r.select(e,t)}selectNext(e,t){Z();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(v(r))return r.select(0,0);if(!E(r)){const o=r.getIndexWithinParent();return s.select(o,o)}return r.select(e,t)}markDirty(){this.getWritable()}}class St extends dn{static getType(){return"linebreak"}static clone(e){return new St(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null){const s=r.firstChild;if(s===t||s.nextSibling===t&&qr(s)){const o=r.lastChild;if(o===t||o.previousSibling===t&&qr(o))return!0}}return!1}(e)?null:{conversion:Ai,priority:0}}}static importJSON(e){return Xe()}exportJSON(){return{type:"linebreak",version:1}}}function Ai(n){return{node:Xe()}}function Xe(){return cn(new St)}function ft(n){return n instanceof St}function qr(n){return n.nodeType===Ee&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function bn(n,e){return 16&e?"code":e&sr?"mark":32&e?"sub":64&e?"sup":null}function Nn(n,e){return 1&e?"strong":2&e?"em":"span"}function uo(n,e,t,r,s){const o=r.classList;let i=at(s,"base");i!==void 0&&o.add(...i),i=at(s,"underlineStrikethrough");let l=!1;const c=e&Jt&&e&Kt;i!==void 0&&(t&Jt&&t&Kt?(l=!0,c||o.add(...i)):c&&o.remove(...i));for(const a in pe){const u=pe[a];if(i=at(s,a),i!==void 0)if(t&u){if(l&&(a==="underline"||a==="strikethrough")){e&u&&o.remove(...i);continue}e&u&&(!c||a!=="underline")&&a!=="strikethrough"||o.add(...i)}else e&u&&o.remove(...i)}}function fo(n,e,t){const r=e.firstChild,s=t.isComposing(),o=n+(s?rn:"");if(r==null)e.textContent=o;else{const i=r.nodeValue;if(i!==o)if(s||be){const[l,c,a]=function(u,h){const d=u.length,f=h.length;let g=0,_=0;for(;g<d&&g<f&&u[g]===h[g];)g++;for(;_+g<d&&_+g<f&&u[d-_-1]===h[f-_-1];)_++;return[g,d-g-_,h.slice(g,f-_)]}(i,o);c!==0&&r.deleteData(l,c),r.insertData(l,a)}else r.nodeValue=o}}function Yr(n,e,t,r,s,o){fo(s,n,e);const i=o.theme.text;i!==void 0&&uo(0,0,r,n,i)}function Ot(n,e){const t=document.createElement(e);return t.appendChild(n),t}class Ge extends dn{static getType(){return"text"}static clone(e){return new Ge(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return _i[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===ke()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=pe[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Ln(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){const r=this.__format,s=bn(0,r),o=Nn(0,r),i=s===null?o:s,l=document.createElement(i);let c=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(o),l.appendChild(c)),Yr(c,this,0,r,this.__text,e);const a=this.__style;return a!==""&&(l.style.cssText=a),l}updateDOM(e,t,r){const s=this.__text,o=e.__format,i=this.__format,l=bn(0,o),c=bn(0,i),a=Nn(0,o),u=Nn(0,i);if((l===null?a:l)!==(c===null?u:c))return!0;if(l===c&&a!==u){const _=t.firstChild;_==null&&P(48);const p=document.createElement(u);return Yr(p,this,0,i,s,r),t.replaceChild(p,_),!1}let h=t;c!==null&&l!==null&&(h=t.firstChild,h==null&&P(49)),fo(s,h,this);const d=r.theme.text;d!==void 0&&o!==i&&uo(0,o,i,h,d);const f=e.__style,g=this.__style;return f!==g&&(t.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:Bi,priority:0}),b:()=>({conversion:zi,priority:0}),code:()=>({conversion:Se,priority:0}),em:()=>({conversion:Se,priority:0}),i:()=>({conversion:Se,priority:0}),s:()=>({conversion:Se,priority:0}),span:()=>({conversion:Mi,priority:0}),strong:()=>({conversion:Se,priority:0}),sub:()=>({conversion:Se,priority:0}),sup:()=>({conversion:Se,priority:0}),u:()=>({conversion:Se,priority:0})}}static importJSON(e){const t=H(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){let{element:t}=super.exportDOM(e);return t!==null&&yr(t)||P(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=Ot(t,"b")),this.hasFormat("italic")&&(t=Ot(t,"i")),this.hasFormat("strikethrough")&&(t=Ot(t,"s")),this.hasFormat("underline")&&(t=Ot(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?pe[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?fi[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=Ln(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=gi[e];if(this.__mode===t)return this;const r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){Z();let r=e,s=t;const o=I(),i=this.getTextContent(),l=this.__key;if(typeof i=="string"){const c=i.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!b(o))return _o(l,r,l,s,"text","text");{const c=ke();c!==o.anchor.key&&c!==o.focus.key||U(l),o.setTextNodeRange(this,r,this,s)}return o}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,s){const o=this.getWritable(),i=o.__text,l=r.length;let c=e;c<0&&(c=l+c,c<0&&(c=0));const a=I();if(s&&b(a)){const h=e+l;a.setTextNodeRange(o,h,o,h)}const u=i.slice(0,c)+r+i.slice(c+t);return o.__text=u,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){Z();const t=this.getLatest(),r=t.getTextContent(),s=t.__key,o=ke(),i=new Set(e),l=[],c=r.length;let a="";for(let T=0;T<c;T++)a!==""&&i.has(T)&&(l.push(a),a=""),a+=r[T];a!==""&&l.push(a);const u=l.length;if(u===0)return[];if(l[0]===r)return[t];const h=l[0],d=t.getParentOrThrow();let f;const g=t.getFormat(),_=t.getStyle(),p=t.__detail;let x=!1;t.isSegmented()?(f=H(h),f.__format=g,f.__style=_,f.__detail=p,x=!0):(f=t.getWritable(),f.__text=h);const m=I(),y=[f];let S=h.length;for(let T=1;T<u;T++){const k=l[T],N=k.length,F=H(k).getWritable();F.__format=g,F.__style=_,F.__detail=p;const A=F.__key,K=S+N;if(b(m)){const M=m.anchor,O=m.focus;M.key===s&&M.type==="text"&&M.offset>S&&M.offset<=K&&(M.key=A,M.offset-=S,m.dirty=!0),O.key===s&&O.type==="text"&&O.offset>S&&O.offset<=K&&(O.key=A,O.offset-=S,m.dirty=!0)}o===s&&U(A),S=K,y.push(F)}(function(T){const k=T.getPreviousSibling(),N=T.getNextSibling();k!==null&&Ht(k),N!==null&&Ht(N)})(this);const w=d.getWritable(),C=this.getIndexWithinParent();return x?(w.splice(C,0,y),this.remove()):w.splice(C,1,y),b(m)&&Zt(m,d,C,u-1),y}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||P(50);const r=this.__key,s=e.__key,o=this.__text,i=o.length;ke()===s&&U(r);const l=I();if(b(l)){const h=l.anchor,d=l.focus;h!==null&&h.key===s&&(os(h,t,r,e,i),l.dirty=!0),d!==null&&d.key===s&&(os(d,t,r,e,i),l.dirty=!0)}const c=e.__text,a=t?c+o:o+c;this.setTextContent(a);const u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function Mi(n){return{forChild:xr(n.style),node:null}}function zi(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:xr(e.style,t?void 0:"bold"),node:null}}const Qr=new WeakMap;function Wi(n){return n.nodeName==="PRE"||n.nodeType===vt&&n.style!==void 0&&n.style.whiteSpace!==void 0&&n.style.whiteSpace.startsWith("pre")}function Bi(n){const e=n;n.parentElement===null&&P(129);let t=e.textContent||"";if(function(r){let s,o=r.parentNode;const i=[r];for(;o!==null&&(s=Qr.get(o))===void 0&&!Wi(o);)i.push(o),o=o.parentNode;const l=s===void 0?o:s;for(let c=0;c<i.length;c++)Qr.set(i[c],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),s=[],o=r.length;for(let i=0;i<o;i++){const l=r[i];l===`
`||l===`\r
`?s.push(Xe()):l==="	"?s.push(wt()):l!==""&&s.push(H(l))}return{node:s}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,s=!0;for(;r!==null&&(r=Xr(r,!1))!==null;){const o=r.textContent||"";if(o.length>0){/[ \t\n]$/.test(o)&&(t=t.slice(1)),s=!1;break}}s&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,s=!0;for(;r!==null&&(r=Xr(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:H(t)}}function Xr(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const o=t.parentElement;if(o===null)return null;t=o}if(t=r,t.nodeType===vt){const o=t.style.display;if(o===""&&!Pi(t)||o!==""&&!o.startsWith("inline"))return null}let s=t;for(;(s=e?t.firstChild:t.lastChild)!==null;)t=s;if(t.nodeType===Ee)return t;if(t.nodeName==="BR")return null}}const $i={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Se(n){const e=$i[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:xr(n.style,e),node:null}}function H(n=""){return cn(new Ge(n))}function E(n){return n instanceof Ge}function xr(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),s=t==="700"||t==="bold",o=r.includes("line-through"),i=n.fontStyle==="italic",l=r.includes("underline"),c=n.verticalAlign;return a=>(E(a)&&(s&&!a.hasFormat("bold")&&a.toggleFormat("bold"),o&&!a.hasFormat("strikethrough")&&a.toggleFormat("strikethrough"),i&&!a.hasFormat("italic")&&a.toggleFormat("italic"),l&&!a.hasFormat("underline")&&a.toggleFormat("underline"),c!=="sub"||a.hasFormat("subscript")||a.toggleFormat("subscript"),c!=="super"||a.hasFormat("superscript")||a.toggleFormat("superscript"),e&&!a.hasFormat(e)&&a.toggleFormat(e)),a)}class Tt extends Ge{static getType(){return"tab"}static clone(e){const t=new Tt(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}static importJSON(e){const t=wt();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(e){P(126)}setDetail(e){P(127)}setMode(e){P(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function wt(){return cn(new Tt)}function Ri(n){return n instanceof Tt}class Ki{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),r=e.getNode();const s=this.offset,o=e.offset;if(v(t)){const i=t.getDescendantByIndex(s);t=i??t}if(v(r)){const i=r.getDescendantByIndex(o);r=i??r}return t===r?s<o:t.isBefore(r)}getNode(){const e=Y(this.key);return e===null&&P(20),e}set(e,t,r){const s=this._selection,o=this.key;this.key=e,this.offset=t,this.type=r,bt()||(ke()===o&&U(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function he(n,e,t){return new Ki(n,e,t)}function En(n,e){let t=e.__key,r=n.offset,s="element";if(E(e)){s="text";const o=e.getTextContentSize();r>o&&(r=o)}else if(!v(e)){const o=e.getNextSibling();if(E(o))t=o.__key,r=0,s="text";else{const i=e.getParent();i&&(t=i.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,s)}function Zr(n,e){if(v(e)){const t=e.getLastDescendant();v(t)||E(t)?En(n,t):En(n,e)}else En(n,e)}function Te(n,e,t,r){n.key=e,n.offset=t,n.type=r}class fn{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!ce(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new fn(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,s=t[r-1];let o;if(E(s))o=s.select();else{const i=s.getIndexWithinParent()+1;o=s.getParentOrThrow().select(i,i)}o.insertNodes(e);for(let i=0;i<r;i++)t[i].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const s of t){const o=Y(s);o!==null&&r.push(o)}return bt()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function b(n){return n instanceof Pe}class Pe{constructor(e,t,r,s){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!b(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this.anchor,r=this.focus,s=t.isBefore(r),o=s?t:r,i=s?r:t;let l=o.getNode(),c=i.getNode();const a=o.offset,u=i.offset;if(v(l)){const d=l.getDescendantByIndex(a);l=d??l}if(v(c)){let d=c.getDescendantByIndex(u);d!==null&&d!==l&&c.getChildAtIndex(u)===d&&(d=d.getPreviousSibling()),c=d??c}let h;return h=l.is(c)?v(l)&&l.getChildrenSize()>0?[]:[l]:l.getNodesBetween(c),bt()||(this._cachedNodes=h),h}setTextNodeRange(e,t,r,s){Te(this.anchor,e.__key,t,"text"),Te(this.focus,r.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],s=this.anchor,o=this.focus,i=s.isBefore(o),[l,c]=jn(this);let a="",u=!0;for(let h=0;h<e.length;h++){const d=e[h];if(v(d)&&!d.isInline())u||(a+=`
`),u=!d.isEmpty();else if(u=!1,E(d)){let f=d.getTextContent();d===t?d===r?s.type==="element"&&o.type==="element"&&o.offset!==s.offset||(f=l<c?f.slice(l,c):f.slice(c,l)):f=i?f.slice(l):f.slice(c):d===r&&(f=i?f.slice(0,c):f.slice(0,l)),a+=f}else!z(d)&&!ft(d)||d===r&&this.isCollapsed()||(a+=d.getTextContent())}return a}applyDOMRange(e){const t=W(),r=t.getEditorState()._selection,s=go(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(s===null)return;const[o,i]=s;Te(this.anchor,o.key,o.offset,o.type),Te(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}clone(){const e=this.anchor,t=this.focus;return new Pe(he(e.key,e.offset,e.type),he(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Ln(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=pe[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],s=t.length;for(let o=0;o<s;o++){const i=t[o];i===`
`||i===`\r
`?r.push(Xe()):i==="	"?r.push(wt()):r.push(H(i))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,s=this.format,o=this.style;let i=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(i=r,l=t),i.type==="element"&&function(p,x,m,y){const S=p.getNode(),w=S.getChildAtIndex(p.offset),C=H(),T=j(S)?me().append(C):C;C.setFormat(m),C.setStyle(y),w===null?S.append(T):w.insertBefore(T),p.is(x)&&x.set(C.__key,0,"text"),p.set(C.__key,0,"text")}(i,l,s,o);const c=i.offset;let a=l.offset;const u=this.getNodes(),h=u.length;let d=u[0];E(d)||P(26);const f=d.getTextContent().length,g=d.getParentOrThrow();let _=u[h-1];if(h===1&&l.type==="element"&&(a=f,l.set(i.key,a,"text")),this.isCollapsed()&&c===f&&(d.isSegmented()||d.isToken()||!d.canInsertTextAfter()||!g.canInsertTextAfter()&&d.getNextSibling()===null)){let p=d.getNextSibling();if(E(p)&&p.canInsertTextBefore()&&!Je(p)||(p=H(),p.setFormat(s),p.setStyle(o),g.canInsertTextAfter()?d.insertAfter(p):g.insertAfter(p)),p.select(0,0),d=p,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&c===0&&(d.isSegmented()||d.isToken()||!d.canInsertTextBefore()||!g.canInsertTextBefore()&&d.getPreviousSibling()===null)){let p=d.getPreviousSibling();if(E(p)&&!Je(p)||(p=H(),p.setFormat(s),g.canInsertTextBefore()?d.insertBefore(p):g.insertBefore(p)),p.select(),d=p,e!=="")return void this.insertText(e)}else if(d.isSegmented()&&c!==f){const p=H(d.getTextContent());p.setFormat(s),d.replace(p),d=p}else if(!this.isCollapsed()&&e!==""){const p=_.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||v(p)&&(!p.canInsertTextBefore()||!p.canInsertTextAfter()))return this.insertText(""),ho(this.anchor,this.focus,null),void this.insertText(e)}if(h===1){if(d.isToken()){const y=H(e);return y.select(),void d.replace(y)}const p=d.getFormat(),x=d.getStyle();if(c!==a||p===s&&x===o){if(Ri(d)){const y=H(e);return y.setFormat(s),y.setStyle(o),y.select(),void d.replace(y)}}else{if(d.getTextContent()!==""){const y=H(e);if(y.setFormat(s),y.setStyle(o),y.select(),c===0)d.insertBefore(y,!1);else{const[S]=d.splitText(c);S.insertAfter(y,!1)}return void(y.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}d.setFormat(s),d.setStyle(o)}const m=a-c;d=d.spliceText(c,m,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=p,this.style=x))}else{const p=new Set([...d.getParentKeys(),..._.getParentKeys()]),x=v(d)?d:d.getParentOrThrow();let m=v(_)?_:_.getParentOrThrow(),y=_;if(!x.is(m)&&m.isInline())do y=m,m=m.getParentOrThrow();while(m.isInline());if(l.type==="text"&&(a!==0||_.getTextContent()==="")||l.type==="element"&&_.getIndexWithinParent()<a)if(E(_)&&!_.isToken()&&a!==_.getTextContentSize()){if(_.isSegmented()){const k=H(_.getTextContent());_.replace(k),_=k}j(l.getNode())||l.type!=="text"||(_=_.spliceText(0,a,"")),p.add(_.__key)}else{const k=_.getParentOrThrow();k.canBeEmpty()||k.getChildrenSize()!==1?_.remove():k.remove()}else p.add(_.__key);const S=m.getChildren(),w=new Set(u),C=x.is(m),T=x.isInline()&&d.getNextSibling()===null?x:d;for(let k=S.length-1;k>=0;k--){const N=S[k];if(N.is(d)||v(N)&&N.isParentOf(d))break;N.isAttached()&&(!w.has(N)||N.is(y)?C||T.insertAfter(N,!1):N.remove())}if(!C){let k=m,N=null;for(;k!==null;){const F=k.getChildren(),A=F.length;(A===0||F[A-1].is(N))&&(p.delete(k.__key),N=k),k=k.getParent()}}if(d.isToken())if(c===f)d.select();else{const k=H(e);k.select(),d.replace(k)}else d=d.spliceText(c,f-c,e,!0),d.getTextContent()===""?d.remove():d.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let k=1;k<h;k++){const N=u[k],F=N.__key;p.has(F)||N.remove()}}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())return this.toggleFormat(e),void U(null);const t=this.getNodes(),r=[];for(const m of t)E(m)&&r.push(m);const s=r.length;if(s===0)return this.toggleFormat(e),void U(null);const o=this.anchor,i=this.focus,l=this.isBackward(),c=l?i:o,a=l?o:i;let u=0,h=r[0],d=c.type==="element"?0:c.offset;if(c.type==="text"&&d===h.getTextContentSize()&&(u=1,h=r[1],d=0),h==null)return;const f=h.getFormatFlags(e,null),g=s-1;let _=r[g];const p=a.type==="text"?a.offset:_.getTextContentSize();if(h.is(_)){if(d===p)return;if(Je(h)||d===0&&p===h.getTextContentSize())h.setFormat(f);else{const m=h.splitText(d,p),y=d===0?m[0]:m[1];y.setFormat(f),c.type==="text"&&c.set(y.__key,0,"text"),a.type==="text"&&a.set(y.__key,p-d,"text")}return void(this.format=f)}d===0||Je(h)||([,h]=h.splitText(d),d=0),h.setFormat(f);const x=_.getFormatFlags(e,f);p>0&&(p===_.getTextContentSize()||Je(_)||([_]=_.splitText(p)),_.setFormat(x));for(let m=u+1;m<g;m++){const y=r[m],S=y.getFormatFlags(e,x);y.setFormat(S)}c.type==="text"&&c.set(h.__key,d,"text"),a.type==="text"&&a.set(_.__key,p,"text"),this.format=f|x}insertNodes(e){if(e.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const g=I();return b(g)||P(134),g.insertNodes(e)}const t=Tn((this.isBackward()?this.focus:this.anchor).getNode(),Ve),r=e[e.length-1];if("__language"in t&&v(t)){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const g=Pn(this);t.splice(g,0,e),r.selectEnd()}return}if(!e.some(g=>(v(g)||z(g))&&!g.isInline())){v(t)||P(135);const g=Pn(this);return t.splice(g,0,e),void r.selectEnd()}const s=function(g){const _=me();let p=null;for(let x=0;x<g.length;x++){const m=g[x],y=ft(m);if(y||z(m)&&m.isInline()||v(m)&&m.isInline()||E(m)||m.isParentRequired()){if(p===null&&(p=m.createParentElementNode(),_.append(p),y))continue;p!==null&&p.append(m)}else _.append(m),p=null}return _}(e),o=s.getLastDescendant(),i=s.getChildren(),l=g=>"__value"in g&&"__checked"in g,c=!v(t)||!t.isEmpty()?this.insertParagraph():null,a=i[i.length-1];let u=i[0];var h;v(h=u)&&Ve(h)&&!h.isEmpty()&&v(t)&&(!t.isEmpty()||l(t))&&(v(t)||P(135),t.append(...u.getChildren()),u=i[1]),u&&function(g,_,p){const x=_.getParentOrThrow().getLastChild();let m=_;const y=[_];for(;m!==x;)m.getNextSibling()||P(140),m=m.getNextSibling(),y.push(m);let S=g;for(const w of y)S=S.insertAfter(w)}(t,u);const d=Tn(o,Ve);c&&v(d)&&(l(c)||Ve(a))&&(d.append(...c.getChildren()),c.remove()),v(t)&&t.isEmpty()&&t.remove(),o.selectEnd();const f=v(t)?t.getLastChild():null;ft(f)&&d!==t&&f.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=me();return q().splice(this.anchor.offset,0,[i]),i.select(),i}const e=Pn(this),t=Tn(this.anchor.getNode(),Ve);v(t)||P(136);const r=t.getChildAtIndex(e),s=r?[r,...r.getNextSiblings()]:[],o=t.insertNewAfter(this,!1);return o?(o.append(...s),o.selectStart(),o):null}insertLineBreak(e){const t=Xe();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),s=t.getIndexWithinParent();r.select(s,s)}}extract(){const e=this.getNodes(),t=e.length,r=t-1,s=this.anchor,o=this.focus;let i=e[0],l=e[r];const[c,a]=jn(this);if(t===0)return[];if(t===1){if(E(i)&&!this.isCollapsed()){const h=c>a?a:c,d=c>a?c:a,f=i.splitText(h,d),g=h===0?f[0]:f[1];return g!=null?[g]:[]}return[i]}const u=s.isBefore(o);if(E(i)){const h=u?c:a;h===i.getTextContentSize()?e.shift():h!==0&&([,i]=i.splitText(h),e[0]=i)}if(E(l)){const h=l.getTextContent().length,d=u?a:c;d===0?e.pop():d!==h&&([l]=l.splitText(d),e[r]=l)}return e}modify(e,t,r){const s=this.focus,o=this.anchor,i=e==="move",l=pt(s,t);if(z(l)&&!l.isIsolated()){if(i&&l.isKeyboardSelectable()){const f=rs();return f.add(l.__key),void de(f)}const d=t?l.getPreviousSibling():l.getNextSibling();if(E(d)){const f=d.__key,g=t?d.getTextContent().length:0;return s.set(f,g,"text"),void(i&&o.set(f,g,"text"))}{const f=l.getParentOrThrow();let g,_;return v(d)?(_=d.__key,g=t?d.getChildrenSize():0):(g=l.getIndexWithinParent(),_=f.__key,t||g++),s.set(_,g,"element"),void(i&&o.set(_,g,"element"))}}const c=W(),a=fe(c._window);if(!a)return;const u=c._blockCursorElement,h=c._rootElement;if(h===null||u===null||!v(l)||l.isInline()||l.canBeEmpty()||mr(u,c,h),function(d,f,g,_){d.modify(f,g,_)}(a,e,t?"backward":"forward",r),a.rangeCount>0){const d=a.getRangeAt(0),f=this.anchor.getNode(),g=j(f)?f:Ni(f);if(this.applyDOMRange(d),this.dirty=!0,!i){const _=this.getNodes(),p=[];let x=!1;for(let m=0;m<_.length;m++){const y=_[m];An(y,g)?p.push(y):x=!0}if(x&&p.length>0)if(t){const m=p[0];v(m)?m.selectStart():m.getParentOrThrow().selectStart()}else{const m=p[p.length-1];v(m)?m.selectEnd():m.getParentOrThrow().selectEnd()}a.anchorNode===d.startContainer&&a.anchorOffset===d.startOffset||function(m){const y=m.focus,S=m.anchor,w=S.key,C=S.offset,T=S.type;Te(S,y.key,y.offset,y.type),Te(y,w,C,T),m._cachedNodes=null}(this)}}}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&v(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const s=t.getParent(),o=t.getNextSibling()||(s===null?null:s.getNextSibling());if(v(o)&&o.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,e))return;const o=this.focus,i=pt(o,e);if(z(i)&&!i.isIsolated()){if(i.isKeyboardSelectable()&&v(s)&&s.getChildrenSize()===0){s.remove();const l=rs();l.add(i.__key),de(l)}else i.remove(),W().dispatchCommand(Xn,void 0);return}if(!e&&v(i)&&v(s)&&s.isEmpty())return s.remove(),void i.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&(r.type==="element"?r.getNode():r.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const l=o.type==="text"?o.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const c=o.offset,a=l.getTextContentSize();if(l.is(s)||e&&c!==a||!e&&c!==0)return void es(l,e,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,a=s.getTextContentSize();if(s.is(l)||e&&c!==0||!e&&c!==a)return void es(s,e,c)}(function(c,a){const u=c.anchor,h=c.focus,d=u.getNode(),f=h.getNode();if(d===f&&u.type==="text"&&h.type==="text"){const g=u.offset,_=h.offset,p=g<_,x=p?g:_,m=p?_:g,y=m-1;x!==y&&(Hs(d.getTextContent().slice(x,m))||(a?h.offset=y:u.offset=y))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&j(r.getParent())&&r.getIndexWithinParent()===0&&r.collapseAtStart(this)}}deleteLine(e){if(this.isCollapsed()){const t=this.anchor.type==="element";if(t&&this.insertText(" "),this.modify("extend",e,"lineboundary"),(e?this.focus:this.anchor).offset===0&&this.modify("extend",e,"character"),t){const r=e?this.anchor:this.focus;r.set(r.key,r.offset+1,r.type)}}this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ce(n){return n instanceof fn}function Gr(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function jn(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[Gr(t),Gr(r)]}function es(n,e,t){const r=n,s=r.getTextContent().split(/(?=\s)/g),o=s.length;let i=0,l=0;for(let a=0;a<o;a++){const u=a===o-1;if(l=i,i+=s[a].length,e&&i===t||i>t||u){s.splice(a,1),u&&(l=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(l,l))}function ts(n,e,t,r){let s,o=e;if(n.nodeType===vt){let i=!1;const l=n.childNodes,c=l.length,a=r._blockCursorElement;o===c&&(i=!0,o=c-1);let u=l[o],h=!1;if(u===a)u=l[o+1],h=!0;else if(a!==null){const d=a.parentNode;n===d&&e>Array.prototype.indexOf.call(d.children,a)&&o--}if(s=He(u),E(s))o=zr(s,i);else{let d=He(n);if(d===null)return null;if(v(d)){o=Math.min(d.getChildrenSize(),o);let f=d.getChildAtIndex(o);if(v(f)&&function(g,_,p){const x=g.getParent();return p===null||x===null||!x.canBeEmpty()||x!==p.getNode()}(f,0,t)){const g=i?f.getLastDescendant():f.getFirstDescendant();g===null?d=f:(f=g,d=v(f)?f:f.getParentOrThrow()),o=0}E(f)?(s=f,d=null,o=zr(f,i)):f!==d&&i&&!h&&o++}else{const f=d.getIndexWithinParent();o=e===0&&z(d)&&He(n)===d?f:f+1,d=d.getParentOrThrow()}if(v(d))return he(d.__key,o,"element")}}else s=He(n);return E(s)?he(s.__key,o,"text"):null}function ns(n,e,t){const r=n.offset,s=n.getNode();if(r===0){const o=s.getPreviousSibling(),i=s.getParent();if(e){if((t||!e)&&o===null&&v(i)&&i.isInline()){const l=i.getPreviousSibling();E(l)&&(n.key=l.__key,n.offset=l.getTextContent().length)}}else v(o)&&!t&&o.isInline()?(n.key=o.__key,n.offset=o.getChildrenSize(),n.type="element"):E(o)&&(n.key=o.__key,n.offset=o.getTextContent().length)}else if(r===s.getTextContent().length){const o=s.getNextSibling(),i=s.getParent();if(e&&v(o)&&o.isInline())n.key=o.__key,n.offset=0,n.type="element";else if((t||e)&&o===null&&v(i)&&i.isInline()&&!i.canInsertTextAfter()){const l=i.getNextSibling();E(l)&&(n.key=l.__key,n.offset=0)}}}function ho(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),s=n.is(e);ns(n,r,s),ns(e,!r,s),s&&(e.key=n.key,e.offset=n.offset,e.type=n.type);const o=W();if(o.isComposing()&&o._compositionKey!==n.key&&b(t)){const i=t.anchor,l=t.focus;Te(n,i.key,i.offset,i.type),Te(e,l.key,l.offset,l.type)}}}function go(n,e,t,r,s,o){if(n===null||t===null||!Ct(s,n,t))return null;const i=ts(n,e,b(o)?o.anchor:null,s);if(i===null)return null;const l=ts(t,r,b(o)?o.focus:null,s);if(l===null)return null;if(i.type==="element"&&l.type==="element"){const c=He(n),a=He(t);if(z(c)&&z(a))return null}return ho(i,l,o),[i,l]}function qn(n){return v(n)&&!n.isInline()}function _o(n,e,t,r,s,o){const i=xe(),l=new Pe(he(n,e,s),he(t,r,o),0,"");return l.dirty=!0,i._selection=l,l}function Ji(){const n=he("root",0,"element"),e=he("root",0,"element");return new Pe(n,e,0,"")}function rs(){return new fn(new Set)}function vr(n,e,t,r){const s=t._window;if(s===null)return null;const o=r||s.event,i=o?o.type:void 0,l=i==="selectionchange",c=!On&&(l||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&o&&o.detail===3||i==="drop"||i===void 0);let a,u,h,d;if(b(n)&&!c)return n.clone();if(e===null)return null;if(a=e.anchorNode,u=e.focusNode,h=e.anchorOffset,d=e.focusOffset,l&&b(n)&&!Ct(t,a,u))return n.clone();const f=go(a,h,u,d,t,n);if(f===null)return null;const[g,_]=f;return new Pe(g,_,b(n)?n.format:0,b(n)?n.style:"")}function I(){return xe()._selection}function kt(){return W()._editorState._selection}function Zt(n,e,t,r=1){const s=n.anchor,o=n.focus,i=s.getNode(),l=o.getNode();if(!e.is(i)&&!e.is(l))return;const c=e.__key;if(n.isCollapsed()){const a=s.offset;if(t<=a&&r>0||t<a&&r<0){const u=Math.max(0,a+r);s.set(c,u,"element"),o.set(c,u,"element"),ss(n)}}else{const a=n.isBackward(),u=a?o:s,h=u.getNode(),d=a?s:o,f=d.getNode();if(e.is(h)){const g=u.offset;(t<=g&&r>0||t<g&&r<0)&&u.set(c,Math.max(0,g+r),"element")}if(e.is(f)){const g=d.offset;(t<=g&&r>0||t<g&&r<0)&&d.set(c,Math.max(0,g+r),"element")}}ss(n)}function ss(n){const e=n.anchor,t=e.offset,r=n.focus,s=r.offset,o=e.getNode(),i=r.getNode();if(n.isCollapsed()){if(!v(o))return;const l=o.getChildrenSize(),c=t>=l,a=c?o.getChildAtIndex(l-1):o.getChildAtIndex(t);if(E(a)){let u=0;c&&(u=a.getTextContentSize()),e.set(a.__key,u,"text"),r.set(a.__key,u,"text")}}else{if(v(o)){const l=o.getChildrenSize(),c=t>=l,a=c?o.getChildAtIndex(l-1):o.getChildAtIndex(t);if(E(a)){let u=0;c&&(u=a.getTextContentSize()),e.set(a.__key,u,"text")}}if(v(i)){const l=i.getChildrenSize(),c=s>=l,a=c?i.getChildAtIndex(l-1):i.getChildAtIndex(s);if(E(a)){let u=0;c&&(u=a.getTextContentSize()),r.set(a.__key,u,"text")}}}}function Gt(n,e,t,r,s){let o=null,i=0,l=null;r!==null?(o=r.__key,E(r)?(i=r.getTextContentSize(),l="text"):v(r)&&(i=r.getChildrenSize(),l="element")):s!==null&&(o=s.__key,E(s)?l="text":v(s)&&(l="element")),o!==null&&l!==null?n.set(o,i,l):(i=e.getIndexWithinParent(),i===-1&&(i=t.getChildrenSize()),n.set(t.__key,i,"element"))}function os(n,e,t,r,s){n.type==="text"?(n.key=t,e||(n.offset+=s)):n.offset>r.getIndexWithinParent()&&(n.offset-=1)}function Vi(n,e,t,r,s,o,i){const l=r.anchorNode,c=r.focusNode,a=r.anchorOffset,u=r.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==o||h!==null&&fr(h))return;if(!b(e))return void(n!==null&&Ct(t,l,c)&&r.removeAllRanges());const d=e.anchor,f=e.focus,g=d.key,_=f.key,p=jt(t,g),x=jt(t,_),m=d.offset,y=f.offset,S=e.format,w=e.style,C=e.isCollapsed();let T=p,k=x,N=!1;if(d.type==="text"){T=Ut(p);const J=d.getNode();N=J.getFormat()!==S||J.getStyle()!==w}else b(n)&&n.anchor.type==="text"&&(N=!0);var F,A,K,M,O;if(f.type==="text"&&(k=Ut(x)),T!==null&&k!==null&&(C&&(n===null||N||b(n)&&(n.format!==S||n.style!==w))&&(F=S,A=w,K=m,M=g,O=performance.now(),oo=[F,A,K,M,O]),a!==m||u!==y||l!==T||c!==k||r.type==="Range"&&C||(h!==null&&o.contains(h)||o.focus({preventScroll:!0}),d.type==="element"))){try{r.setBaseAndExtent(T,m,k,y)}catch{}if(!s.has("skip-scroll-into-view")&&e.isCollapsed()&&o!==null&&o===document.activeElement){const J=e instanceof Pe&&e.anchor.type==="element"?T.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(J!==null){let te;if(J instanceof Text){const Be=document.createRange();Be.selectNode(J),te=Be.getBoundingClientRect()}else te=J.getBoundingClientRect();(function(Be,nt,br){const Nr=br.ownerDocument,Er=Nr.defaultView;if(Er===null)return;let{top:_n,bottom:pn}=nt,Et=0,Pt=0,ve=br;for(;ve!==null;){const mn=ve===Nr.body;if(mn)Et=0,Pt=ln(Be).innerHeight;else{const Dt=ve.getBoundingClientRect();Et=Dt.top,Pt=Dt.bottom}let rt=0;if(_n<Et?rt=-(Et-_n):pn>Pt&&(rt=pn-Pt),rt!==0)if(mn)Er.scrollBy(0,rt);else{const Dt=ve.scrollTop;ve.scrollTop+=rt;const Pr=ve.scrollTop-Dt;_n-=Pr,pn-=Pr}if(mn)break;ve=on(ve)}})(t,te,o)}}Vn=!0}}function Ui(n){let e=I()||kt();e===null&&(e=q().selectEnd()),e.insertNodes(n)}function Pn(n){let e=n;n.isCollapsed()||e.removeText();const t=I();b(t)&&(e=t),b(e)||P(161);const r=e.anchor;let s=r.getNode(),o=r.offset;for(;!Ve(s);)[s,o]=Hi(s,o);return o}function Hi(n,e){const t=n.getParent();if(!t){const s=me();return q().append(s),s.select(),[q(),0]}if(E(n)){const s=n.splitText(e);if(s.length===0)return[t,n.getIndexWithinParent()];const o=e===0?0:1;return[t,s[0].getIndexWithinParent()+o]}if(!v(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const s=new Pe(he(n.__key,e,"element"),he(n.__key,e,"element"),0,""),o=n.insertNewAfter(s);o&&o.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}let $=null,R=null,G=!1,Dn=!1,Wt=0;const is={characterData:!0,childList:!0,subtree:!0};function bt(){return G||$!==null&&$._readOnly}function Z(){G&&P(13)}function po(){Wt>99&&P(14)}function xe(){return $===null&&P(15),$}function W(){return R===null&&P(16),R}function ji(){return R}function ls(n,e,t){const r=e.__type,s=function(l,c){const a=l._nodes.get(c);return a===void 0&&P(30,c),a}(n,r);let o=t.get(r);o===void 0&&(o=Array.from(s.transforms),t.set(r,o));const i=o.length;for(let l=0;l<i&&(o[l](e),e.isAttached());l++);}function cs(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function qi(n){return Cr(n,W()._nodes)}function Cr(n,e){const t=n.type,r=e.get(t);r===void 0&&P(17,t);const s=r.klass;n.type!==s.getType()&&P(18,s.name);const o=s.importJSON(n),i=n.children;if(v(o)&&Array.isArray(i))for(let l=0;l<i.length;l++){const c=Cr(i[l],e);o.append(c)}return o}function as(n,e){const t=$,r=G,s=R;$=n,G=!0,R=null;try{return e()}finally{$=t,G=r,R=s}}function Ae(n,e){const t=n._pendingEditorState,r=n._rootElement,s=n._headless||r===null;if(t===null)return;const o=n._editorState,i=o._selection,l=t._selection,c=n._dirtyType!==Me,a=$,u=G,h=R,d=n._updating,f=n._observer;let g=null;if(n._pendingEditorState=null,n._editorState=t,!s&&c&&f!==null){R=n,$=t,G=!1,n._updating=!0;try{const C=n._dirtyType,T=n._dirtyElements,k=n._dirtyLeaves;f.disconnect(),g=Oi(o,t,n,C,T,k)}catch(C){if(C instanceof Error&&n._onError(C),Dn)throw C;return vo(n,null,r,t),$s(n),n._dirtyType=Qe,Dn=!0,Ae(n,o),void(Dn=!1)}finally{f.observe(r,is),n._updating=d,$=a,G=u,R=h}}t._readOnly||(t._readOnly=!0);const _=n._dirtyLeaves,p=n._dirtyElements,x=n._normalizedNodes,m=n._updateTags,y=n._deferred;c&&(n._dirtyType=Me,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(C,T){const k=C._decorators;let N=C._pendingDecorators||k;const F=T._nodeMap;let A;for(A in N)F.has(A)||(N===k&&(N=Vs(C)),delete N[A])}(n,t);const S=s?null:fe(n._window);if(n._editable&&S!==null&&(c||l===null||l.dirty)){R=n,$=t;try{if(f!==null&&f.disconnect(),c||l===null||l.dirty){const C=n._blockCursorElement;C!==null&&mr(C,n,r),Vi(i,l,n,S,m,r)}Ei(n,r,l),f!==null&&f.observe(r,is)}finally{R=h,$=a}}g!==null&&function(C,T,k,N,F){const A=Array.from(C._listeners.mutation),K=A.length;for(let M=0;M<K;M++){const[O,J]=A[M],te=T.get(J);te!==void 0&&O(te,{dirtyLeaves:N,prevEditorState:F,updateTags:k})}}(n,g,m,_,o),b(l)||l===null||i!==null&&i.is(l)||n.dispatchCommand(Xn,void 0);const w=n._pendingDecorators;w!==null&&(n._decorators=w,n._pendingDecorators=null,ht("decorator",n,!0,w)),function(C,T,k){const N=Mr(T),F=Mr(k);N!==F&&ht("textcontent",C,!0,F)}(n,e||o,t),ht("update",n,!0,{dirtyElements:p,dirtyLeaves:_,editorState:t,normalizedNodes:x,prevEditorState:e||o,tags:m}),function(C,T){if(C._deferred=[],T.length!==0){const k=C._updating;C._updating=!0;try{for(let N=0;N<T.length;N++)T[N]()}finally{C._updating=k}}}(n,y),function(C){const T=C._updates;if(T.length!==0){const k=T.shift();if(k){const[N,F]=k;yo(C,N,F)}}}(n)}function ht(n,e,t,...r){const s=e._updating;e._updating=t;try{const o=Array.from(e._listeners[n]);for(let i=0;i<o.length;i++)o[i].apply(null,r)}finally{e._updating=s}}function mo(n,e,t){if(n._updating===!1||R!==n){let s=!1;return n.update(()=>{s=mo(n,e,t)}),s}const r=hr(n);for(let s=4;s>=0;s--)for(let o=0;o<r.length;o++){const i=r[o]._commands.get(e);if(i!==void 0){const l=i[s];if(l!==void 0){const c=Array.from(l),a=c.length;for(let u=0;u<a;u++)if(c[u](t,n)===!0)return!0}}}return!1}function us(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const s=t.shift();if(s){const[o,i]=s;let l,c;i!==void 0&&(l=i.onUpdate,c=i.tag,i.skipTransforms&&(r=!0),l&&n._deferred.push(l),c&&n._updateTags.add(c)),o()}}return r}function yo(n,e,t){const r=n._updateTags;let s,o,i=!1,l=!1;t!==void 0&&(s=t.onUpdate,o=t.tag,o!=null&&r.add(o),i=t.skipTransforms||!1,l=t.discrete||!1),s&&n._deferred.push(s);const c=n._editorState;let a=n._pendingEditorState,u=!1;(a===null||a._readOnly)&&(a=n._pendingEditorState=new gn(new Map((a||c)._nodeMap)),u=!0),a._flushSync=l;const h=$,d=G,f=R,g=n._updating;$=a,G=!1,n._updating=!0,R=n;try{u&&(n._headless?c._selection!==null&&(a._selection=c._selection.clone()):a._selection=function(m){const y=m.getEditorState()._selection,S=fe(m._window);return b(y)||y==null?vr(y,S,m,null):y.clone()}(n));const p=n._compositionKey;e(),i=us(n,i),function(m,y){const S=y.getEditorState()._selection,w=m._selection;if(b(w)){const C=w.anchor,T=w.focus;let k;if(C.type==="text"&&(k=C.getNode(),k.selectionTransform(S,w)),T.type==="text"){const N=T.getNode();k!==N&&N.selectionTransform(S,w)}}}(a,n),n._dirtyType!==Me&&(i?function(m,y){const S=y._dirtyLeaves,w=m._nodeMap;for(const C of S){const T=w.get(C);E(T)&&T.isAttached()&&T.isSimpleText()&&!T.isUnmergeable()&&Lr(T)}}(a,n):function(m,y){const S=y._dirtyLeaves,w=y._dirtyElements,C=m._nodeMap,T=ke(),k=new Map;let N=S,F=N.size,A=w,K=A.size;for(;F>0||K>0;){if(F>0){y._dirtyLeaves=new Set;for(const M of N){const O=C.get(M);E(O)&&O.isAttached()&&O.isSimpleText()&&!O.isUnmergeable()&&Lr(O),O!==void 0&&cs(O,T)&&ls(y,O,k),S.add(M)}if(N=y._dirtyLeaves,F=N.size,F>0){Wt++;continue}}y._dirtyLeaves=new Set,y._dirtyElements=new Map;for(const M of A){const O=M[0],J=M[1];if(O!=="root"&&!J)continue;const te=C.get(O);te!==void 0&&cs(te,T)&&ls(y,te,k),w.set(O,J)}N=y._dirtyLeaves,F=N.size,A=y._dirtyElements,K=A.size,Wt++}y._dirtyLeaves=S,y._dirtyElements=w}(a,n),us(n),function(m,y,S,w){const C=m._nodeMap,T=y._nodeMap,k=[];for(const[N]of w){const F=T.get(N);F!==void 0&&(F.isAttached()||(v(F)&&Qs(F,N,C,T,k,w),C.has(N)||w.delete(N),k.push(N)))}for(const N of k)T.delete(N);for(const N of S){const F=T.get(N);F===void 0||F.isAttached()||(C.has(N)||S.delete(N),T.delete(N))}}(c,a,n._dirtyLeaves,n._dirtyElements)),p!==n._compositionKey&&(a._flushSync=!0);const x=a._selection;if(b(x)){const m=a._nodeMap,y=x.anchor.key,S=x.focus.key;m.get(y)!==void 0&&m.get(S)!==void 0||P(19)}else ce(x)&&x._nodes.size===0&&(a._selection=null)}catch(p){return p instanceof Error&&n._onError(p),n._pendingEditorState=c,n._dirtyType=Qe,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void Ae(n)}finally{$=h,G=d,R=f,n._updating=g,Wt=0}n._dirtyType!==Me||function(p,x){const m=x.getEditorState()._selection,y=p._selection;if(y!==null){if(y.dirty||!y.is(m))return!0}else if(m!==null)return!0;return!1}(a,n)?a._flushSync?(a._flushSync=!1,Ae(n)):u&&Si(()=>{Ae(n)}):(a._flushSync=!1,u&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function ee(n,e,t){n._updating?n._updates.push([e,t]):yo(n,e,t)}class hn extends dn{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return hi[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=W()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(E(t)&&e.push(t),v(t)){const r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;v(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;v(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),r=t.length;if(e>=r){const o=t[r-1];return v(o)&&o.getLastDescendant()||o||null}const s=t[e];return v(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Y(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&P(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Y(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&P(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let r,s;if(e<t/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=e;){if(s===e)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=t-1;r!==null&&s>=e;){if(s===e)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let e="";const t=this.getChildren(),r=t.length;for(let s=0;s<r;s++){const o=t[s];e+=o.getTextContent(),v(o)&&s!==r-1&&!o.isInline()&&(e+=ye)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),r=t.length;for(let s=0;s<r;s++){const o=t[s];e+=o.getTextContentSize(),v(o)&&s!==r-1&&!o.isInline()&&(e+=ye.length)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){if(e!==""){const t=Ir[e];return!!(this.getFormat()&t)}return!1}select(e,t){Z();const r=I();let s=e,o=t;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const c=this.getFirstChild();if(E(c)||v(c))return c.select(0,0)}else if(!(e!==void 0&&e!==i||t!==void 0&&t!==i)){const c=this.getLastChild();if(E(c)||v(c))return c.select()}}s===void 0&&(s=i),o===void 0&&(o=i);const l=this.__key;return b(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,o,"element"),r.dirty=!0,r):_o(l,s,l,o,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?Ir[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){const s=r.length,o=this.getChildrenSize(),i=this.getWritable(),l=i.__key,c=[],a=[],u=this.getChildAtIndex(e+t);let h=null,d=o-t+s;if(e!==0)if(e===o)h=this.getLastChild();else{const g=this.getChildAtIndex(e);g!==null&&(h=g.getPreviousSibling())}if(t>0){let g=h===null?this.getFirstChild():h.getNextSibling();for(let _=0;_<t;_++){g===null&&P(100);const p=g.getNextSibling(),x=g.__key;Le(g.getWritable()),a.push(x),g=p}}let f=h;for(let g=0;g<s;g++){const _=r[g];f!==null&&_.is(f)&&(h=f=f.getPreviousSibling());const p=_.getWritable();p.__parent===l&&d--,Le(p);const x=_.__key;if(f===null)i.__first=x,p.__prev=null;else{const m=f.getWritable();m.__next=x,p.__prev=m.__key}_.__key===l&&P(76),p.__parent=l,c.push(x),f=_}if(e+t===o)f!==null&&(f.getWritable().__next=null,i.__last=f.__key);else if(u!==null){const g=u.getWritable();if(f!==null){const _=f.getWritable();g.__prev=f.__key,_.__next=u.__key}else g.__prev=null}if(i.__size=d,a.length){const g=I();if(b(g)){const _=new Set(a),p=new Set(c),{anchor:x,focus:m}=g;ds(x,_,p)&&Gt(x,x.getNode(),this,h,u),ds(m,_,p)&&Gt(m,m.getNode(),this,h,u),d!==0||this.canBeEmpty()||Ze(this)||this.remove()}}return i}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}}function v(n){return n instanceof hn}function ds(n,e,t){let r=n.getNode();for(;r;){const s=r.__key;if(e.has(s)&&!t.has(s))return!0;r=r.getParent()}return!1}class Yi extends dn{constructor(e){super(e)}decorate(e,t){P(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function z(n){return n instanceof Yi}class Nt extends hn{static getType(){return"root"}static clone(){return new Nt}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){P(51)}getTextContent(){const e=this.__cachedText;return!bt()&&W()._dirtyType!==Me||e===null?super.getTextContent():e}remove(){P(52)}replace(e){P(53)}insertBefore(e){P(54)}insertAfter(e){P(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){const r=e[t];v(r)||z(r)||P(56)}return super.append(...e)}static importJSON(e){const t=q();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function j(n){return n instanceof Nt}function Sr(){return new gn(new Map([["root",new Nt]]))}function xo(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&P(130,t.name),v(n)){const r=e.children;Array.isArray(r)||P(59,t.name);const s=n.getChildren();for(let o=0;o<s.length;o++){const i=xo(s[o]);r.push(i)}}return e}class gn{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e){return as(this,e)}clone(e){const t=new gn(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return as(this,()=>({root:xo(q())}))}}class Tr extends hn{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class et extends hn{constructor(e){super(e),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}hasTextFormat(e){const t=pe[e];return!!(this.getTextFormat()&t)}static clone(e){return new et(e.__key)}createDOM(e){const t=document.createElement("p"),r=at(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:Qi,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&yr(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();t.style.textAlign=r;const s=this.getDirection();s&&(t.dir=s);const o=this.getIndent();o>0&&(t.style.textIndent=20*o+"px")}return{element:t}}static importJSON(e){const t=me();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t.setTextFormat(e.textFormat),t}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(e,t){const r=me();r.setTextFormat(e.format);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||E(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Qi(n){const e=me();if(n.style){e.setFormat(n.style.textAlign);const t=parseInt(n.style.textIndent,10)/20;t>0&&e.setIndent(t)}return{node:e}}function me(){return cn(new et)}function xt(n){return n instanceof et}const L=0,Xi=4;function vo(n,e,t,r){const s=n._keyToDOMMap;s.clear(),n._editorState=Sr(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=Me,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const o=n._observer;o!==null&&(o.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",s.set("root",t))}function Zi(n){const e=n||{},t=ji(),r=e.theme||{},s=n===void 0?t:e.parentEditor||null,o=e.disableEvents||!1,i=Sr(),l=e.namespace||(s!==null?s._config.namespace:js()),c=e.editorState,a=[Nt,Ge,St,Tt,et,Tr,...e.nodes||[]],{onError:u,html:h}=e,d=e.editable===void 0||e.editable;let f;if(n===void 0&&t!==null)f=t._nodes;else{f=new Map;for(let _=0;_<a.length;_++){let p=a[_],x=null,m=null;if(typeof p!="function"){const C=p;p=C.replace,x=C.with,m=C.withKlass||null}const y=p.getType(),S=p.transform(),w=new Set;S!==null&&w.add(S),f.set(y,{exportDOM:h&&h.export?h.export.get(p):void 0,klass:p,replace:x,replaceWithKlass:m,transforms:w})}}const g=new Gi(i,s,f,{disableEvents:o,namespace:l,theme:r},u||console.error,function(_,p){const x=new Map,m=new Set,y=S=>{Object.keys(S).forEach(w=>{let C=x.get(w);C===void 0&&(C=[],x.set(w,C)),C.push(S[w])})};return _.forEach(S=>{const w=S.klass.importDOM;if(w==null||m.has(w))return;m.add(w);const C=w.call(S.klass);C!==null&&y(C)}),p&&y(p),x}(f,h?h.import:void 0),d);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=Qe),g}class Gi{constructor(e,t,r,s,o,i,l){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=Me,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=js(),this._onError=o,this._htmlConversions=i,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&P(35);const s=this._commands;s.has(e)||s.set(e,[new Set,new Set,new Set,new Set,new Set]);const o=s.get(e);o===void 0&&P(36,String(e));const i=o[r];return i.add(t),()=>{i.delete(t),o.every(l=>l.size===0)&&s.delete(e)}}registerMutationListener(e,t){let r=this._nodes.get(e.getType());r===void 0&&P(37,e.name);let s=e,o=null;for(;o=r.replaceWithKlass;)s=o,r=this._nodes.get(o.getType()),r===void 0&&P(37,o.name);const i=this._listeners.mutation;return i.set(t,s),()=>{i.delete(t)}}registerNodeTransformToKlass(e,t){const r=e.getType(),s=this._nodes.get(r);return s===void 0&&P(37,e.name),s.transforms.add(t),s}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),s=[r],o=r.replaceWithKlass;if(o!=null){const c=this.registerNodeTransformToKlass(o,t);s.push(c)}var i,l;return i=this,l=e.getType(),ee(i,()=>{const c=xe();if(c.isEmpty())return;if(l==="root")return void q().markDirty();const a=c._nodeMap;for(const[,u]of a)u.markDirty()},i._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(c=>c.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return D(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=at(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=e,vo(this,t,e,s),t!==null&&(this._config.disableEvents||Li(t),r!=null&&t.classList.remove(...r)),e!==null){const o=function(l){const c=l.ownerDocument;return c&&c.defaultView||null}(e),i=e.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=o,this._dirtyType=Qe,$s(this),this._updateTags.add("history-merge"),Ae(this),this._config.disableEvents||function(l,c){const a=l.ownerDocument,u=Xt.get(a);(u===void 0||u<1)&&a.addEventListener("selectionchange",ao),Xt.set(a,(u||0)+1),l.__lexicalEditor=c;const h=co(l);for(let d=0;d<Jn.length;d++){const[f,g]=Jn[d],_=typeof g=="function"?p=>{jr(p)||(Hr(p),(c.isEditable()||f==="click")&&g(p,c))}:p=>{if(jr(p))return;Hr(p);const x=c.isEditable();switch(f){case"cut":return x&&D(c,tr,p);case"copy":return D(c,tn,p);case"paste":return x&&D(c,Zn,p);case"dragstart":return x&&D(c,Fs,p);case"dragover":return x&&D(c,Os,p);case"dragend":return x&&D(c,Qo,p);case"focus":return x&&D(c,Go,p);case"blur":return x&&D(c,ei,p);case"drop":return x&&D(c,Is,p)}};l.addEventListener(f,_),h.push(()=>{l.removeEventListener(f,_)})}}(e,this),r!=null&&e.classList.add(...r)}else this._editorState=s,this._pendingEditorState=null,this._window=null;ht("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&P(38),Bs(this);const r=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;r===null||r.isEmpty()||(o!=null&&s.add(o),Ae(this)),this._pendingEditorState=e,this._dirtyType=Qe,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),Ae(this)}parseEditorState(e,t){return function(r,s,o){const i=Sr(),l=$,c=G,a=R,u=s._dirtyElements,h=s._dirtyLeaves,d=s._cloneNotNeeded,f=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,$=i,G=!1,R=s;try{const g=s._nodes;Cr(r.root,g),o&&o(),i._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=u,s._dirtyLeaves=h,s._cloneNotNeeded=d,s._dirtyType=f,$=l,G=c,R=a}return i}(typeof e=="string"?JSON.parse(e):e,this,t)}update(e,t){ee(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),ee(this,()=>{const s=I(),o=q();s!==null?s.dirty=!0:o.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?o.selectStart():o.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=fe(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,ht("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}function el(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const s=n.getRootElement();if(document.activeElement!==s)return;const o=r.data;if(typeof o=="string"){let i;try{i=JSON.parse(o)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const l=i.payload;if(l&&l.functionId==="makeChanges"){const c=l.args;if(c){const[a,u,h,d,f,g]=c;n.update(()=>{const _=I();if(b(_)){const p=_.anchor;let x=p.getNode(),m=0,y=0;if(E(x)&&a>=0&&u>=0&&(m=a,y=a+u,_.setTextNodeRange(x,m,x,y)),m===y&&h===""||(_.insertRawText(h),x=p.getNode()),E(x)){m=d,y=d+f;const S=x.getTextContentSize();m=m>S?S:m,y=y>S?S:y,_.setTextNodeRange(x,m,x,y)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function tl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}tl(function(n){const e=new URLSearchParams;e.append("code",n);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const nl=new Map;function rl(n){const e={},t=n.split(";");for(const r of t)if(r!==""){const[s,o]=r.split(/:([^]+)/);s&&o&&(e[s.trim()]=o.trim())}return e}function Co(n){const e=n.constructor.clone(n);return e.__parent=n.__parent,e.__next=n.__next,e.__prev=n.__prev,v(n)&&v(e)?(r=n,(t=e).__first=r.__first,t.__last=r.__last,t.__size=r.__size,t.__format=r.__format,t.__indent=r.__indent,t.__dir=r.__dir,t):E(n)&&E(e)?function(s,o){return s.__format=o.__format,s.__style=o.__style,s.__mode=o.__mode,s.__detail=o.__detail,s}(e,n):xt(n)&&xt(e)?function(s,o){return s.__textFormat=o.__textFormat,s}(e,n):e;var t,r}function So(n,e){const t=n.getStartEndPoints();if(e.isSelected(n)&&!e.isSegmented()&&!e.isToken()&&t!==null){const[r,s]=t,o=n.isBackward(),i=r.getNode(),l=s.getNode(),c=e.is(i),a=e.is(l);if(c||a){const[u,h]=jn(n),d=i.is(l),f=e.is(o?l:i),g=e.is(o?i:l);let _,p=0;return d?(p=u>h?h:u,_=u>h?u:h):f?(p=o?h:u,_=void 0):g&&(p=0,_=o?u:h),e.__text=e.__text.slice(p,_),e}}return e}function sl(n){const e=n.getStyle(),t=rl(e);nl.set(e,t)}function fs(n,e){const t=pt(n.focus,e);return z(t)&&!t.isIsolated()||v(t)&&!t.isInline()&&!t.canBeEmpty()}function ol(n,e,t,r){n.modify(e?"extend":"move",t,r)}function il(n){const e=n.anchor.getNode();return(j(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function hs(n,e,t){const r=il(n);ol(n,e,t?!r:r,"character")}function ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cl=ll(function(n){const e=new URLSearchParams;e.append("code",n);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const To=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,al=To&&"documentMode"in document?document.documentMode:null;!(!To||!("InputEvent"in window)||al)&&"getTargetRanges"in new window.InputEvent("input");function wr(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}function ul(n){const e=kr(n,t=>v(t)&&!t.isInline());return v(e)||cl(4,n.__key),e}const kr=(n,e)=>{let t=n;for(;t!==q()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function Fe(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}const Lt=0,Yn=1,Qn=2,le=0,dl=1,gs=2,fl=3,hl=4;function gl(n,e,t,r,s){if(n===null||t.size===0&&r.size===0&&!s)return le;const o=e._selection,i=n._selection;if(s)return dl;if(!(b(o)&&b(i)&&i.isCollapsed()&&o.isCollapsed()))return le;const l=function(x,m,y){const S=x._nodeMap,w=[];for(const C of m){const T=S.get(C);T!==void 0&&w.push(T)}for(const[C,T]of y){if(!T)continue;const k=S.get(C);k===void 0||j(k)||w.push(k)}return w}(e,t,r);if(l.length===0)return le;if(l.length>1){const x=e._nodeMap,m=x.get(o.anchor.key),y=x.get(i.anchor.key);return m&&y&&!n._nodeMap.has(m.__key)&&E(m)&&m.__text.length===1&&o.anchor.offset===1?gs:le}const c=l[0],a=n._nodeMap.get(c.__key);if(!E(a)||!E(c)||a.__mode!==c.__mode)return le;const u=a.__text,h=c.__text;if(u===h)return le;const d=o.anchor,f=i.anchor;if(d.key!==f.key||d.type!=="text")return le;const g=d.offset,_=f.offset,p=h.length-u.length;return p===1&&_===g-1?gs:p===-1&&_===g+1?fl:p===-1&&_===g?hl:le}function _l(n,e){let t=Date.now(),r=le;return(s,o,i,l,c,a)=>{const u=Date.now();if(a.has("historic"))return r=le,t=u,Qn;const h=gl(s,o,l,c,n.isComposing()),d=(()=>{const f=i===null||i.editor===n,g=a.has("history-push");if(!g&&f&&a.has("history-merge"))return Lt;if(s===null)return Yn;const _=o._selection;return l.size>0||c.size>0?g===!1&&h!==le&&h===r&&u<t+e&&f||l.size===1&&function(p,x,m){const y=x._nodeMap.get(p),S=m._nodeMap.get(p),w=x._selection,C=m._selection;let T=!1;return b(w)&&b(C)&&(T=w.anchor.type==="element"&&w.focus.type==="element"&&C.anchor.type==="text"&&C.focus.type==="text"),!(T||!E(y)||!E(S))&&y.__type===S.__type&&y.__text===S.__text&&y.__mode===S.__mode&&y.__detail===S.__detail&&y.__style===S.__style&&y.__format===S.__format&&y.__parent===S.__parent}(Array.from(l)[0],s,o)?Lt:Yn:_!==null?Lt:Qn})();return t=u,r=h,d}}function _s(n){n.undoStack=[],n.redoStack=[],n.current=null}function pl(n,e,t){const r=_l(n,t);return wr(n.registerCommand(Gn,()=>(function(o,i){const l=i.redoStack,c=i.undoStack;if(c.length!==0){const a=i.current,u=c.pop();a!==null&&(l.push(a),o.dispatchCommand(It,!0)),c.length===0&&o.dispatchCommand(Ft,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}}(n,e),!0),L),n.registerCommand(er,()=>(function(o,i){const l=i.redoStack,c=i.undoStack;if(l.length!==0){const a=i.current;a!==null&&(c.push(a),o.dispatchCommand(Ft,!0));const u=l.pop();l.length===0&&o.dispatchCommand(It,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:"historic"})}}(n,e),!0),L),n.registerCommand(Xo,()=>(_s(e),!1),L),n.registerCommand(Zo,()=>(_s(e),n.dispatchCommand(It,!1),n.dispatchCommand(Ft,!1),!0),L),n.registerUpdateListener(({editorState:o,prevEditorState:i,dirtyLeaves:l,dirtyElements:c,tags:a})=>{const u=e.current,h=e.redoStack,d=e.undoStack,f=u===null?null:u.editorState;if(u!==null&&o===f)return;const g=r(i,o,u,l,c,a);if(g===Yn)h.length!==0&&(e.redoStack=[],n.dispatchCommand(It,!1)),u!==null&&(d.push({...u}),n.dispatchCommand(Ft,!0));else if(g===Qn)return;e.current={editor:n,editorState:o}}))}function ml(){return{current:null,redoStack:[],undoStack:[]}}function yl(n,e){const t=e.body?e.body.childNodes:[];let r=[];const s=[];for(let o=0;o<t.length;o++){const i=t[o];if(!ko.has(i.nodeName)){const l=bo(i,n,s,!1);l!==null&&(r=r.concat(l))}}return function(o){for(const i of o)i.getNextSibling()instanceof Tr&&i.insertAfter(Xe());for(const i of o){const l=i.getChildren();for(const c of l)i.insertBefore(c);i.remove()}}(s),r}function xl(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=q().getChildren();for(let s=0;s<r.length;s++)wo(n,r[s],t,e);return t.innerHTML}function wo(n,e,t,r=null){let s=r===null||e.isSelected(r);const o=v(e)&&e.excludeFromCopy("html");let i=e;if(r!==null){let f=Co(e);f=E(f)&&r!==null?So(r,f):f,i=f}const l=v(i)?i.getChildren():[],c=n._nodes.get(i.getType());let a;a=c&&c.exportDOM!==void 0?c.exportDOM(n,i):i.exportDOM(n);const{element:u,after:h}=a;if(!u)return!1;const d=document.createDocumentFragment();for(let f=0;f<l.length;f++){const g=l[f],_=wo(n,g,d,r);!s&&v(e)&&_&&e.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!o){if(yr(u)&&u.append(d),t.append(u),h){const f=h.call(i,u);f&&u.replaceWith(f)}}else t.append(d);return s}const ko=new Set(["STYLE","SCRIPT"]);function bo(n,e,t,r,s=new Map,o){let i=[];if(ko.has(n.nodeName))return i;let l=null;const c=function(g,_){const{nodeName:p}=g,x=_._htmlConversions.get(p.toLowerCase());let m=null;if(x!==void 0)for(const y of x){const S=y(g);S!==null&&(m===null||(m.priority||0)<(S.priority||0))&&(m=S)}return m!==null?m.conversion:null}(n,e),a=c?c(n):null;let u=null;if(a!==null){u=a.after;const g=a.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,_]of s)if(l=_(l,o),!l)break;l&&i.push(...Array.isArray(g)?g:[l])}a.forChild!=null&&s.set(n.nodeName,a.forChild)}const h=n.childNodes;let d=[];const f=(l==null||!Ze(l))&&(l!=null&&qn(l)||r);for(let g=0;g<h.length;g++)d.push(...bo(h[g],e,t,f,new Map(s),l));return u!=null&&(d=u(d)),Di(n)&&(d=vl(n,d,f?()=>{const g=new Tr;return t.push(g),g}:me)),l==null?i=i.concat(d):v(l)&&l.append(...d),i}function vl(n,e,t){const r=n.style.textAlign,s=[];let o=[];for(let i=0;i<e.length;i++){const l=e[i];if(qn(l))r&&!l.getFormat()&&l.setFormat(r),s.push(l);else if(o.push(l),i===e.length-1||i<e.length-1&&qn(e[i+1])){const c=t();c.setFormat(r),c.append(...o),s.push(c),o=[]}}return s}function Cl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var en=Cl(function(n){const e=new URLSearchParams;e.append("code",n);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const Sl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,No=n=>Sl?(n||window).getSelection():null;function Tl(n){const e=I();return e==null&&en(166),b(e)&&e.isCollapsed()||e.getNodes().length===0?"":xl(n,e)}function wl(n){const e=I();return e==null&&en(166),b(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(kl(n,e))}function ps(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const i=JSON.parse(r);if(i.namespace===t._config.namespace&&Array.isArray(i.nodes))return ms(t,bl(i.nodes),e)}catch{}const s=n.getData("text/html");if(s)try{const i=new DOMParser().parseFromString(s,"text/html");return ms(t,yl(t,i),e)}catch{}const o=n.getData("text/plain")||n.getData("text/uri-list");if(o!=null)if(b(e)){const i=o.split(/(\r?\n|\t)/);i[i.length-1]===""&&i.pop();for(let l=0;l<i.length;l++){const c=I();if(b(c)){const a=i[l];a===`
`||a===`\r
`?c.insertParagraph():a==="	"?c.insertNodes([wt()]):c.insertText(a)}}}else e.insertRawText(o)}function ms(n,e,t){n.dispatchCommand(Ro,{nodes:e,selection:t})||t.insertNodes(e)}function Eo(n,e,t,r=[]){let s=e===null||t.isSelected(e);const o=v(t)&&t.excludeFromCopy("html");let i=t;if(e!==null){let a=Co(t);a=E(a)&&e!==null?So(e,a):a,i=a}const l=v(i)?i.getChildren():[],c=function(a){const u=a.exportJSON(),h=a.constructor;if(u.type!==h.getType()&&en(58,h.name),v(a)){const d=u.children;Array.isArray(d)||en(59,h.name)}return u}(i);if(E(i)){const a=i.__text;a.length>0?c.text=a:s=!1}for(let a=0;a<l.length;a++){const u=l[a],h=Eo(n,e,u,c.children);!s&&v(t)&&h&&t.extractWithChild(u,e,"clone")&&(s=!0)}if(s&&!o)r.push(c);else if(Array.isArray(c.children))for(let a=0;a<c.children.length;a++){const u=c.children[a];r.push(u)}return s}function kl(n,e){const t=[],r=q().getChildren();for(let s=0;s<r.length;s++)Eo(n,e,r[s],t);return{namespace:n._config.namespace,nodes:t}}function bl(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],s=qi(r);E(s)&&sl(s),e.push(s)}return e}let Ke=null;async function ys(n,e){if(Ke!==null)return!1;if(e!==null)return new Promise((l,c)=>{n.update(()=>{l(xs(n,e))})});const t=n.getRootElement(),r=n._window==null?window.document:n._window.document,s=No(n._window);if(t===null||s===null)return!1;const o=r.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(r.createTextNode("#")),t.append(o);const i=new Range;return i.setStart(o,0),i.setEnd(o,1),s.removeAllRanges(),s.addRange(i),new Promise((l,c)=>{const a=n.registerCommand(tn,u=>(Fe(u,ClipboardEvent)&&(a(),Ke!==null&&(window.clearTimeout(Ke),Ke=null),l(xs(n,u))),!0),Xi);Ke=window.setTimeout(()=>{a(),Ke=null,l(!1)},50),r.execCommand("copy"),o.remove()})}function xs(n,e){const t=No(n._window);if(!t)return!1;const r=t.anchorNode,s=t.focusNode;if(r!==null&&s!==null&&!Ct(n,r,s))return!1;e.preventDefault();const o=e.clipboardData,i=I();if(o===null||i===null)return!1;const l=Tl(n),c=wl(n);let a="";return i!==null&&(a=i.getTextContent()),l!==null&&o.setData("text/html",l),c!==null&&o.setData("application/x-lexical-editor",c),o.setData("text/plain",a),!0}function vs(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const tt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Nl=tt&&"documentMode"in document?document.documentMode:null,El=!(!tt||!("InputEvent"in window)||Nl)&&"getTargetRanges"in new window.InputEvent("input"),Pl=tt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Dl=tt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Il=tt&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Fl=tt&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Il,Cs=$o();function At(n){let e=null;if(Fe(n,DragEvent)?e=n.dataTransfer:Fe(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),s=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),s]}function Ss(n){const e=I();if(!b(e))return!1;const t=new Set,r=e.getNodes();for(let s=0;s<r.length;s++){const o=r[s],i=o.getKey();if(t.has(i))continue;const l=kr(o,a=>v(a)&&!a.isInline());if(l===null)continue;const c=l.getKey();l.canIndent()&&!t.has(c)&&(t.add(c),n(l))}return t.size>0}function Mt(n){const e=ze(n);return z(e)}function Ol(n){return wr(n.registerCommand(Ts,e=>{const t=I();return!!ce(t)&&(t.clear(),!0)},0),n.registerCommand(Oe,e=>{const t=I();return!!b(t)&&(t.deleteCharacter(e),!0)},L),n.registerCommand(gt,e=>{const t=I();return!!b(t)&&(t.deleteWord(e),!0)},L),n.registerCommand(_t,e=>{const t=I();return!!b(t)&&(t.deleteLine(e),!0)},L),n.registerCommand(qe,e=>{const t=I();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)ps(r,t,n);else if(b(t)){const s=e.data;return s&&t.insertText(s),!0}}return!0},L),n.registerCommand(In,()=>{const e=I();return!!b(e)&&(e.removeText(),!0)},L),n.registerCommand(we,e=>{const t=I();return!!b(t)&&(t.formatText(e),!0)},L),n.registerCommand(Yo,e=>{const t=I();if(!b(t)&&!ce(t))return!1;const r=t.getNodes();for(const s of r){const o=kr(s,i=>v(i)&&!i.isInline());o!==null&&o.setFormat(e)}return!0},L),n.registerCommand(je,e=>{const t=I();return!!b(t)&&(t.insertLineBreak(e),!0)},L),n.registerCommand(Bt,()=>{const e=I();return!!b(e)&&(e.insertParagraph(),!0)},L),n.registerCommand(jo,()=>(Ui([wt()]),!0),L),n.registerCommand(qo,()=>Ss(e=>{const t=e.getIndent();e.setIndent(t+1)}),L),n.registerCommand(Dr,()=>Ss(e=>{const t=e.getIndent();t>0&&e.setIndent(t-1)}),L),n.registerCommand(bs,e=>{const t=I();if(ce(t)&&!Mt(e.target)){const r=t.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(b(t)){const r=pt(t.focus,!0);if(!e.shiftKey&&z(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},L),n.registerCommand(Ns,e=>{const t=I();if(ce(t)){const r=t.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(b(t)){if(function(s){const o=s.focus;return o.key==="root"&&o.offset===q().getChildrenSize()}(t))return e.preventDefault(),!0;const r=pt(t.focus,!1);if(!e.shiftKey&&z(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},L),n.registerCommand(ks,e=>{const t=I();if(ce(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}if(!b(t))return!1;if(fs(t,!0)){const r=e.shiftKey;return e.preventDefault(),hs(t,r,!0),!0}return!1},L),n.registerCommand(ws,e=>{const t=I();if(ce(t)&&!Mt(e.target)){const s=t.getNodes();if(s.length>0)return e.preventDefault(),s[0].selectNext(0,0),!0}if(!b(t))return!1;const r=e.shiftKey;return!!fs(t,!1)&&(e.preventDefault(),hs(t,r,!1),!0)},L),n.registerCommand(Es,e=>{if(Mt(e.target))return!1;const t=I();if(!b(t))return!1;e.preventDefault();const{anchor:r}=t,s=r.getNode();return t.isCollapsed()&&r.offset===0&&!j(s)&&ul(s).getIndent()>0?n.dispatchCommand(Dr,void 0):n.dispatchCommand(Oe,!0)},L),n.registerCommand(Ds,e=>{if(Mt(e.target))return!1;const t=I();return!!b(t)&&(e.preventDefault(),n.dispatchCommand(Oe,!1))},L),n.registerCommand($t,e=>{const t=I();if(!b(t))return!1;if(e!==null){if((Dl||Pl||Fl)&&El)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(je,!1)}return n.dispatchCommand(Bt,void 0)},L),n.registerCommand(Ps,()=>{const e=I();return!!b(e)&&(n.blur(),!0)},L),n.registerCommand(Is,e=>{const[,t]=At(e);if(t.length>0){const s=vs(e.clientX,e.clientY);if(s!==null){const{offset:o,node:i}=s,l=ze(i);if(l!==null){const c=Ji();if(E(l))c.anchor.set(l.getKey(),o,"text"),c.focus.set(l.getKey(),o,"text");else{const u=l.getParentOrThrow().getKey(),h=l.getIndexWithinParent()+1;c.anchor.set(u,h,"element"),c.focus.set(u,h,"element")}const a=Rs(c);de(a)}n.dispatchCommand(Cs,t)}return e.preventDefault(),!0}const r=I();return!!b(r)},L),n.registerCommand(Fs,e=>{const[t]=At(e),r=I();return!(t&&!b(r))},L),n.registerCommand(Os,e=>{const[t]=At(e),r=I();if(t&&!b(r))return!1;const s=vs(e.clientX,e.clientY);if(s!==null){const o=ze(s.node);z(o)&&e.preventDefault()}return!0},L),n.registerCommand(Fn,()=>(bi(),!0),L),n.registerCommand(tn,e=>(ys(n,Fe(e,ClipboardEvent)?e:null),!0),L),n.registerCommand(tr,e=>(async function(t,r){await ys(r,Fe(t,ClipboardEvent)?t:null),r.update(()=>{const s=I();b(s)?s.removeText():ce(s)&&s.getNodes().forEach(o=>o.remove())})}(e,n),!0),L),n.registerCommand(Zn,e=>{const[,t,r]=At(e);return t.length>0&&!r?(n.dispatchCommand(Cs,t),!0):fr(e.target)?!1:I()!==null&&(function(s,o){s.preventDefault(),o.update(()=>{const i=I(),l=Fe(s,InputEvent)||Fe(s,KeyboardEvent)?null:s.clipboardData;l!=null&&i!==null&&ps(l,i,o)},{tag:"paste"})}(e,n),!0)},L))}function Ll(n){let e,t,r="Add new product",s,o,i,l,c='<span class="label-text text-lg font-semibold">Product name</span>',a,u,h,d,f,g,_,p=n[1].toDateString()+"",x,m,y,S='<span class="label-text text-lg font-semibold">Product description</span>',w,C;return{c(){e=ne("div"),t=ne("h1"),t.textContent=r,s=$e(),o=ne("div"),i=ne("label"),l=ne("div"),l.innerHTML=c,a=$e(),u=ne("input"),h=$e(),d=ne("div"),f=ne("span"),g=$e(),_=ne("span"),x=Do(p),m=$e(),y=ne("div"),y.innerHTML=S,w=$e(),C=ne("div"),this.h()},l(T){e=re(T,"DIV",{});var k=De(e);t=re(k,"H1",{"data-svelte-h":!0}),yn(t)!=="svelte-10a3vw8"&&(t.textContent=r),s=Re(k),o=re(k,"DIV",{class:!0});var N=De(o);i=re(N,"LABEL",{class:!0});var F=De(i);l=re(F,"DIV",{class:!0,"data-svelte-h":!0}),yn(l)!=="svelte-8o6h2u"&&(l.innerHTML=c),a=Re(F),u=re(F,"INPUT",{type:!0,placeholder:!0,class:!0}),h=Re(F),d=re(F,"DIV",{class:!0});var A=De(d);f=re(A,"SPAN",{class:!0}),De(f).forEach(Ce),g=Re(A),_=re(A,"SPAN",{class:!0});var K=De(_);x=Io(K,p),K.forEach(Ce),A.forEach(Ce),F.forEach(Ce),m=Re(N),y=re(N,"DIV",{class:!0,"data-svelte-h":!0}),yn(y)!=="svelte-yoo9tb"&&(y.innerHTML=S),w=Re(N),C=re(N,"DIV",{contenteditable:!0}),De(C).forEach(Ce),N.forEach(Ce),k.forEach(Ce),this.h()},h(){se(l,"class","label"),se(u,"type","text"),se(u,"placeholder","Enter the product name"),se(u,"class","input input-bordered w-full"),se(f,"class","label-text-alt"),se(_,"class","label-text-alt"),se(d,"class","label"),se(i,"class","form-control w-full"),se(y,"class","label"),se(C,"contenteditable",""),se(o,"class","m-auto rounded bg-white max-w-[800px] p-5")},m(T,k){Fo(T,e,k),V(e,t),V(e,s),V(e,o),V(o,i),V(i,l),V(i,a),V(i,u),V(i,h),V(i,d),V(d,f),V(d,g),V(d,_),V(_,x),V(o,m),V(o,y),V(o,w),V(o,C),n[2](C)},p:xn,i:xn,o:xn,d(T){T&&Ce(e),n[2](null)}}}function Al(n,e,t){let r,s=null,o=new Date;Oo(()=>{s=Zi(Bo),s.setRootElement(r),Lo(),wr(Ol(s),el(s),pl(s,ml(),300))});function i(l){Ao[l?"unshift":"push"](()=>{r=l,t(0,r)})}return[r,o,i]}class Bl extends Mo{constructor(e){super(),zo(this,e,Al,Ll,Po,{})}}export{Bl as component,Wl as universal};
