import{s as ie,A as ue,e as v,o as H,c as k,a as q,w as fe,q as L,d as A,k as i,B as O,i as ne,f as c,C as V,D as te,E as me,F as pe,z as de,h as ce,r as _e,t as ge,b as be}from"../chunks/scheduler.BdO_c8T1.js";import{S as he,i as $e,b as we,c as z,d as D,m as F,a as I,e as Pe,t as B,f as M,g as ve}from"../chunks/index.DuQZmDCs.js";import{e as ke,A as se}from"../chunks/forms.C96AWTIS.js";import{g as Te}from"../chunks/entry.wgEMl8FU.js";import{B as Ne}from"../chunks/Input.svelte_svelte_type_style_lang.DhSNKVHg.js";import{A as Ae}from"../chunks/routes.B4_TBsYH.js";import{p as Se}from"../chunks/stores.D4_T5i5p.js";import{T as re}from"../chunks/tabler--lock.DlV_MiZe.js";import{I as ae}from"../chunks/icon.Cfg-3FdP.js";/* empty css                                                     */import{H as oe,a as Ee,b as Ce}from"../chunks/consts.JQ69i4O5.js";function Ie(a){var _;let t,n;return t=new se({props:{variant:"info",content:(_=a[0])==null?void 0:_.data,classes:"mb-3"}}),{c(){z(t.$$.fragment)},l(r){D(t.$$.fragment,r)},m(r,u){F(t,r,u),n=!0},p(r,u){var l;const o={};u&1&&(o.content=(l=r[0])==null?void 0:l.data),t.$set(o)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function Be(a){var _;let t,n;return t=new se({props:{content:(_=a[0])==null?void 0:_.error,variant:"error",classes:"mb-3"}}),{c(){z(t.$$.fragment)},l(r){D(t.$$.fragment,r)},m(r,u){F(t,r,u),n=!0},p(r,u){var l;const o={};u&1&&(o.content=(l=r[0])==null?void 0:l.error),t.$set(o)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function He(a){let t;return{c(){t=ge("Change Password")},l(n){t=be(n,"Change Password")},m(n,_){ne(n,t,_)},d(n){n&&A(t)}}}function qe(a){let t,n,_="Set new password",r,u,o,l,T,f,g,S,d,W,m,j,$,R,E,y,p,J,w,K,G,P,Q,X;const Y=[Be,Ie],N=[];function Z(e,s){var b,h;return s&1&&(u=null),u==null&&(u=!!(e[0]&&((b=e[0])!=null&&b.status)&&[Ee,Ce].includes(e[0].status))),u?0:e[0]&&((h=e[0])==null?void 0:h.status)===oe?1:-1}~(o=Z(a,-1))&&(l=N[o]=Y[o](a)),d=new ae({props:{icon:re}}),E=new ae({props:{icon:re}});function le(e){a[7](e)}let x={variant:"filled",size:"sm",fullWidth:!0,type:"submit",disabled:a[3]||!a[1]||!a[2]||a[1]!==a[2],$$slots:{default:[He]},$$scope:{ctx:a}};return a[3]!==void 0&&(x.loading=a[3]),w=new Ne({props:x}),ue.push(()=>we(w,"loading",le)),{c(){t=v("div"),n=v("h1"),n.textContent=_,r=H(),l&&l.c(),T=H(),f=v("form"),g=v("label"),S=v("span"),z(d.$$.fragment),W=H(),m=v("input"),j=H(),$=v("label"),R=v("span"),z(E.$$.fragment),y=H(),p=v("input"),J=H(),z(w.$$.fragment),this.h()},l(e){t=k(e,"DIV",{class:!0});var s=q(t);n=k(s,"H1",{class:!0,"data-svelte-h":!0}),fe(n)!=="svelte-1xnwy19"&&(n.textContent=_),r=L(s),l&&l.l(s),T=L(s),f=k(s,"FORM",{action:!0,method:!0});var b=q(f);g=k(b,"LABEL",{class:!0,for:!0});var h=q(g);S=k(h,"SPAN",{});var U=q(S);D(d.$$.fragment,U),U.forEach(A),W=L(h),m=k(h,"INPUT",{type:!0,name:!0,class:!0,id:!0,placeholder:!0}),h.forEach(A),j=L(b),$=k(b,"LABEL",{class:!0,for:!0});var C=q($);R=k(C,"SPAN",{});var ee=q(R);D(E.$$.fragment,ee),ee.forEach(A),y=L(C),p=k(C,"INPUT",{type:!0,name:!0,class:!0,id:!0,placeholder:!0}),C.forEach(A),J=L(b),D(w.$$.fragment,b),b.forEach(A),s.forEach(A),this.h()},h(){var e,s;i(n,"class","p-2 mb-4"),i(m,"type","password"),i(m,"name","newPassword"),i(m,"class","grow"),i(m,"id","newPassword"),i(m,"placeholder","New Password"),m.required=!0,m.disabled=a[3],i(g,"class","input input-md flex w-full input-bordered items-center gap-2 mb-3"),i(g,"for","newPassword"),O(g,"input-error",(e=a[0])==null?void 0:e.error),i(p,"type","password"),i(p,"name","confirmNewPassword"),i(p,"class","grow"),i(p,"id","confirmNewPassword"),i(p,"placeholder","Confirm New Password"),p.required=!0,p.disabled=a[3],i($,"class","input input-md flex w-full input-bordered items-center gap-2 mb-3"),i($,"for","confirmNewPassword"),O($,"input-error",(s=a[0])==null?void 0:s.error),i(f,"action",G=`?email=${a[4].url.searchParams.get("email")}&token=${a[4].url.searchParams.get("token")}`),i(f,"method","post"),i(t,"class","max-w-md min-w-80 rounded-md p-2")},m(e,s){ne(e,t,s),c(t,n),c(t,r),~o&&N[o].m(t,null),c(t,T),c(t,f),c(f,g),c(g,S),F(d,S,null),c(g,W),c(g,m),V(m,a[1]),c(f,j),c(f,$),c($,R),F(E,R,null),c($,y),c($,p),V(p,a[2]),c(f,J),F(w,f,null),P=!0,Q||(X=[te(m,"input",a[5]),te(p,"input",a[6]),me(ke.call(null,f))],Q=!0)},p(e,[s]){var U,C;let b=o;o=Z(e,s),o===b?~o&&N[o].p(e,s):(l&&(ve(),I(N[b],1,1,()=>{N[b]=null}),Pe()),~o?(l=N[o],l?l.p(e,s):(l=N[o]=Y[o](e),l.c()),B(l,1),l.m(t,T)):l=null),(!P||s&8)&&(m.disabled=e[3]),s&2&&m.value!==e[1]&&V(m,e[1]),(!P||s&1)&&O(g,"input-error",(U=e[0])==null?void 0:U.error),(!P||s&8)&&(p.disabled=e[3]),s&4&&p.value!==e[2]&&V(p,e[2]),(!P||s&1)&&O($,"input-error",(C=e[0])==null?void 0:C.error);const h={};s&14&&(h.disabled=e[3]||!e[1]||!e[2]||e[1]!==e[2]),s&512&&(h.$$scope={dirty:s,ctx:e}),!K&&s&8&&(K=!0,h.loading=e[3],pe(()=>K=!1)),w.$set(h),(!P||s&16&&G!==(G=`?email=${e[4].url.searchParams.get("email")}&token=${e[4].url.searchParams.get("token")}`))&&i(f,"action",G)},i(e){P||(B(l),B(d.$$.fragment,e),B(E.$$.fragment,e),B(w.$$.fragment,e),P=!0)},o(e){I(l),I(d.$$.fragment,e),I(E.$$.fragment,e),I(w.$$.fragment,e),P=!1},d(e){e&&A(t),~o&&N[o].d(),M(d),M(E),M(w),Q=!1,de(X)}}}function Le(a,t,n){let _;ce(a,Se,d=>n(4,_=d));let{form:r}=t,u;_e(()=>()=>clearTimeout(u));let o="",l="",T=!1;function f(){o=this.value,n(1,o)}function g(){l=this.value,n(2,l)}function S(d){T=d,n(3,T)}return a.$$set=d=>{"form"in d&&n(0,r=d.form)},a.$$.update=()=>{a.$$.dirty&1&&(r==null?void 0:r.status)===oe&&(u=setTimeout(()=>{Te(Ae.AUTH_SIGNIN,{invalidateAll:!0})},3e3))},[r,o,l,T,_,f,g,S]}class ye extends he{constructor(t){super(),$e(this,t,Le,qe,ie,{form:0})}}export{ye as component};
